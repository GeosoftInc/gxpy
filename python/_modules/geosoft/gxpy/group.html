

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>geosoft.gxpy.group &#8212; Geosoft GX Python API 9.9.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/maki.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-87443115-1']);
  _gaq.push(['_trackPageview']);
</script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Geosoft GX Python API 9.9.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">geosoft.gxpy.group</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Introduction</a></li>
    <li><a href="../../index.html">Module code</a></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for geosoft.gxpy.group</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">A Geosoft View (:class:`geosoft.gxpy.view.View` or :class:`geosoft.gxpy.view.View_3d`) contains graphical elements as</span>
<span class="sd">`Group` instances. Groups are named and are available to a user in a Geosoft viewer, which allows groups to</span>
<span class="sd">be turned on or off, modify the transparency, or be deleted.</span>

<span class="sd">2D views can only accept 2D groups, while a 3D view can accept both 2D and 3D groups. When a 2D group is placed</span>
<span class="sd">in a 3D view, the group is placed on a the active plane inside the 3D view</span>

<span class="sd">:Classes:</span>
<span class="sd">    :`Group`:               base class for named rendering groups in 2D and 3D views.</span>
<span class="sd">    :`Draw`:                2D drawing group, handles 2D drawing to a view or plane in a 3D view</span>
<span class="sd">    :`Draw_3d`:             3D grawing group for 3D objects placed in a 3d view</span>
<span class="sd">    :`Color_symbols_group`: group for 2D symbols rendered based on data values</span>
<span class="sd">    :`Aggregate_group`:     group that contains a :class:`geosoft.gxpy.agg.Aggregate_image` instance</span>
<span class="sd">    :`Color`:               colour definition</span>
<span class="sd">    :`Color_map`:           maps values to colors</span>
<span class="sd">    :`Pen`:                 pen definition, includes line colour, thickness and pattern, and fill.</span>
<span class="sd">    :`Text_def`:            defined text characteristics</span>
<span class="sd">    :`VoxDisplayGroup`:     a &#39;geosoft.gxpy.vox.VoxDisplay` in a `geosoft.gxpy.view.View_3d`</span>

<span class="sd">:Constants:</span>
<span class="sd">    :GROUP_NAME_SIZE: `geosoft.gxpy.view.VIEW_NAME_SIZE`</span>
<span class="sd">    :NEW: `geosoft.gxapi.MVIEW_GROUP_NEW`</span>
<span class="sd">    :APPEND: `geosoft.gxapi.MVIEW_GROUP_APPEND`</span>
<span class="sd">    :READ_ONLY: max(NEW, APPEND) + 1</span>
<span class="sd">    :REPLACE: READ_ONLY + 1</span>

<span class="sd">    :SMOOTH_NONE: `geosoft.gxapi.MVIEW_SMOOTH_NEAREST`</span>
<span class="sd">    :SMOOTH_CUBIC: `geosoft.gxapi.MVIEW_SMOOTH_CUBIC`</span>
<span class="sd">    :SMOOTH_AKIMA: `geosoft.gxapi.MVIEW_SMOOTH_AKIMA`</span>

<span class="sd">    :TILE_RECTANGULAR: `geosoft.gxapi.MVIEW_TILE_RECTANGULAR`</span>
<span class="sd">    :TILE_DIAGONAL: `geosoft.gxapi.MVIEW_TILE_DIAGONAL`</span>
<span class="sd">    :TILE_TRIANGULAR: `geosoft.gxapi.MVIEW_TILE_TRIANGULAR`</span>
<span class="sd">    :TILE_RANDOM: `geosoft.gxapi.MVIEW_TILE_RANDOM`</span>

<span class="sd">    :UNIT_VIEW: 0</span>
<span class="sd">    :UNIT_MAP: 2</span>
<span class="sd">    :UNIT_VIEW_UNWARPED: 3</span>

<span class="sd">    :GRATICULE_DOT: 0</span>
<span class="sd">    :GRATICULE_LINE: 1</span>
<span class="sd">    :GRATICULE_CROSS: 2</span>

<span class="sd">    :LINE_STYLE_SOLID: 1</span>
<span class="sd">    :LINE_STYLE_LONG: 2</span>
<span class="sd">    :LINE_STYLE_DOTTED: 3</span>
<span class="sd">    :LINE_STYLE_SHORT: 4</span>
<span class="sd">    :LINE_STYLE_LONG_SHORT_LONG: 5</span>
<span class="sd">    :LINE_STYLE_LONG_DOT_LONG: 6</span>

<span class="sd">    :SYMBOL_NONE: 0</span>
<span class="sd">    :SYMBOL_DOT: 1</span>
<span class="sd">    :SYMBOL_PLUS: 2</span>
<span class="sd">    :SYMBOL_X: 3</span>
<span class="sd">    :SYMBOL_BOX: 4</span>
<span class="sd">    :SYMBOL_TRIANGLE: 5</span>
<span class="sd">    :SYMBOL_INVERTED_TRIANGLE: 6</span>
<span class="sd">    :SYMBOL_HEXAGON: 7</span>
<span class="sd">    :SYMBOL_SMALL_BOX: 8</span>
<span class="sd">    :SYMBOL_SMALL_DIAMOND: 9</span>
<span class="sd">    :SYMBOL_CIRCLE: 20</span>

<span class="sd">    :SYMBOL_3D_SPHERE: 0</span>
<span class="sd">    :SYMBOL_3D_CUBE: 1</span>
<span class="sd">    :SYMBOL_3D_CYLINDER: 2</span>
<span class="sd">    :SYMBOL_3D_CONE: 3</span>

<span class="sd">    :FONT_WEIGHT_ULTRALIGHT: 1</span>
<span class="sd">    :FONT_WEIGHT_LIGHT: 2</span>
<span class="sd">    :FONT_WEIGHT_MEDIUM: 3</span>
<span class="sd">    :FONT_WEIGHT_BOLD: 4</span>
<span class="sd">    :FONT_WEIGHT_XBOLD: 5</span>
<span class="sd">    :FONT_WEIGHT_XXBOLD: 6</span>

<span class="sd">    :CMODEL_RGB: 0</span>
<span class="sd">    :CMODEL_CMY: 1</span>
<span class="sd">    :CMODEL_HSV: 2</span>

<span class="sd">    :C_BLACK: 67108863</span>
<span class="sd">    :C_RED: 33554687</span>
<span class="sd">    :C_GREEN: 33619712</span>
<span class="sd">    :C_BLUE: 50266112</span>
<span class="sd">    :C_CYAN: 50331903</span>
<span class="sd">    :C_MAGENTA: 50396928</span>
<span class="sd">    :C_YELLOW: 67043328</span>
<span class="sd">    :C_GREY: 41975936</span>
<span class="sd">    :C_LT_RED: 54542336</span>
<span class="sd">    :C_LT_GREEN: 54526016</span>
<span class="sd">    :C_LT_BLUE: 50348096</span>
<span class="sd">    :C_LT_CYAN: 50331712</span>
<span class="sd">    :C_LT_MAGENTA: 50348032</span>
<span class="sd">    :C_LT_YELLOW: 54525952</span>
<span class="sd">    :C_LT_GREY: 54542400</span>
<span class="sd">    :C_GREY10: 51910680</span>
<span class="sd">    :C_GREY25: 54542400</span>
<span class="sd">    :C_GREY50: 41975936</span>
<span class="sd">    :C_WHITE: 50331648</span>
<span class="sd">    :C_TRANSPARENT: 0</span>

<span class="sd">    :REF_BOTTOM_LEFT: 0</span>
<span class="sd">    :REF_BOTTOM_CENTER: 1</span>
<span class="sd">    :REF_BOTTOM_RIGHT: 2</span>
<span class="sd">    :REF_CENTER_LEFT: 3</span>
<span class="sd">    :REF_CENTER: 4</span>
<span class="sd">    :REF_CENTER_RIGHT: 5</span>
<span class="sd">    :REF_TOP_LEFT: 6</span>
<span class="sd">    :REF_TOP_CENTER: 7</span>
<span class="sd">    :REF_TOP_RIGHT: 8</span>

<span class="sd">    :GROUP_ALL: 0</span>
<span class="sd">    :GROUP_MARKED: 1</span>
<span class="sd">    :GROUP_VISIBLE: 2</span>
<span class="sd">    :GROUP_AGG: 3</span>
<span class="sd">    :GROUP_CSYMB: 4</span>
<span class="sd">    :GROUP_VOXD: 5</span>

<span class="sd">    :LOCATE_FIT: `geosoft.gxapi.MVIEW_RELOCATE_FIT`</span>
<span class="sd">    :LOCATE_FIT_KEEP_ASPECT: `geosoft.gxapi.MVIEW_RELOCATE_ASPECT`</span>
<span class="sd">    :LOCATE_CENTER: `geosoft.gxapi.MVIEW_RELOCATE_ASPECT_CENTER`</span>

<span class="sd">    :COLOR_BAR_RIGHT: 0</span>
<span class="sd">    :COLOR_BAR_LEFT: 1</span>
<span class="sd">    :COLOR_BAR_BOTTOM: 2</span>
<span class="sd">    :COLOR_BAR_TOP: 3</span>

<span class="sd">    :COLOR_BAR_ANNOTATE_RIGHT: 1</span>
<span class="sd">    :COLOR_BAR_ANNOTATE_LEFT: -1</span>
<span class="sd">    :COLOR_BAR_ANNOTATE_TOP: 1</span>
<span class="sd">    :COLOR_BAR_ANNOTATE_BOTTOM: -1</span>

<span class="sd">    :CYLINDER_OPEN: 0</span>
<span class="sd">    :CYLINDER_CLOSE_START: 1</span>
<span class="sd">    :CYLINDER_CLOSE_END: 2</span>
<span class="sd">    :CYLINDER_CLOSE_ALL: 3</span>

<span class="sd">    :POINT_STYLE_DOT: 0</span>
<span class="sd">    :POINT_STYLE_SPHERE: 1</span>

<span class="sd">    :LINE3D_STYLE_LINE: 0</span>
<span class="sd">    :LINE3D_STYLE_TUBE: 1</span>
<span class="sd">    :LINE3D_STYLE_TUBE_JOINED: 2</span>

<span class="sd">    :SURFACE_FLAT: `geosoft.gxapi.MVIEW_DRAWOBJ3D_MODE_FLAT`</span>
<span class="sd">    :SURFACE_SMOOTH: `geosoft.gxapi.MVIEW_DRAWOBJ3D_MODE_SMOOTH`</span>

<span class="sd">.. note::</span>

<span class="sd">    Regression tests provide usage examples:</span>
<span class="sd">    `group drawing tests &lt;https://github.com/GeosoftInc/gxpy/blob/master/geosoft/gxpy/tests/test_group.py&gt;`_</span>

<span class="sd">.. seealso:: :mod:`geosoft.gxpy.view`, :mod:`geosoft.gxpy.map`</span>

<span class="sd">   :class:`geosoft.gxapi.GXMVIEW`, :class:`geosoft.gxapi.GXMVU`</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">geosoft</span>
<span class="kn">import</span> <span class="nn">geosoft.gxapi</span> <span class="k">as</span> <span class="nn">gxapi</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">gx</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">vv</span> <span class="k">as</span> <span class="n">gxvv</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">geometry</span> <span class="k">as</span> <span class="n">gxgm</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">coordinate_system</span> <span class="k">as</span> <span class="n">gxcs</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">utility</span> <span class="k">as</span> <span class="n">gxu</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">view</span> <span class="k">as</span> <span class="n">gxv</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">agg</span> <span class="k">as</span> <span class="n">gxagg</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">metadata</span> <span class="k">as</span> <span class="n">gxmeta</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">vox_display</span> <span class="k">as</span> <span class="n">gxvoxd</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">spatialdata</span> <span class="k">as</span> <span class="n">gxspd</span>


<span class="n">__version__</span> <span class="o">=</span> <span class="n">geosoft</span><span class="o">.</span><span class="n">__version__</span>


<span class="k">def</span> <span class="nf">_t</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">geosoft</span><span class="o">.</span><span class="n">gxpy</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>


<span class="n">MAX_TRANSPARENT</span> <span class="o">=</span> <span class="mi">4</span>


<div class="viewcode-block" id="GroupException"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.GroupException">[docs]</a><span class="k">class</span> <span class="nc">GroupException</span><span class="p">(</span><span class="n">geosoft</span><span class="o">.</span><span class="n">GXRuntimeError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Exceptions from :mod:`geosoft.gxpy.group`.</span>

<span class="sd">    .. versionadded:: 9.2</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<span class="n">GROUP_NAME_SIZE</span> <span class="o">=</span> <span class="n">gxv</span><span class="o">.</span><span class="n">VIEW_NAME_SIZE</span>
<span class="n">NEW</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_GROUP_NEW</span>
<span class="n">APPEND</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_GROUP_APPEND</span>
<span class="n">READ_ONLY</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">NEW</span><span class="p">,</span> <span class="n">APPEND</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">REPLACE</span> <span class="o">=</span> <span class="n">READ_ONLY</span> <span class="o">+</span> <span class="mi">1</span>

<span class="n">SMOOTH_NONE</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_SMOOTH_NEAREST</span>
<span class="n">SMOOTH_CUBIC</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_SMOOTH_CUBIC</span>
<span class="n">SMOOTH_AKIMA</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_SMOOTH_AKIMA</span>

<span class="n">TILE_RECTANGULAR</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_TILE_RECTANGULAR</span>
<span class="n">TILE_DIAGONAL</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_TILE_DIAGONAL</span>
<span class="n">TILE_TRIANGULAR</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_TILE_TRIANGULAR</span>
<span class="n">TILE_RANDOM</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_TILE_RANDOM</span>

<span class="n">UNIT_VIEW</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">UNIT_MAP</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">UNIT_VIEW_UNWARPED</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">GRATICULE_DOT</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">GRATICULE_LINE</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">GRATICULE_CROSS</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">LINE_STYLE_SOLID</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">LINE_STYLE_LONG</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">LINE_STYLE_DOTTED</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">LINE_STYLE_SHORT</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">LINE_STYLE_LONG_SHORT_LONG</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">LINE_STYLE_LONG_DOT_LONG</span> <span class="o">=</span> <span class="mi">6</span>

<span class="n">SYMBOL_NONE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">SYMBOL_DOT</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">SYMBOL_PLUS</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">SYMBOL_X</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">SYMBOL_BOX</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">SYMBOL_TRIANGLE</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">SYMBOL_INVERTED_TRIANGLE</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">SYMBOL_HEXAGON</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">SYMBOL_SMALL_BOX</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">SYMBOL_SMALL_DIAMOND</span> <span class="o">=</span> <span class="mi">9</span>
<span class="n">SYMBOL_CIRCLE</span> <span class="o">=</span> <span class="mi">20</span>

<span class="n">SYMBOL_3D_SPHERE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">SYMBOL_3D_CUBE</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">SYMBOL_3D_CYLINDER</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">SYMBOL_3D_CONE</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">_weight_factor</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mf">48.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="mf">24.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="mf">16.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">0.145</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="mf">4.0</span><span class="p">)</span>

<span class="n">FONT_WEIGHT_ULTRALIGHT</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">FONT_WEIGHT_LIGHT</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">FONT_WEIGHT_MEDIUM</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">FONT_WEIGHT_BOLD</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">FONT_WEIGHT_XBOLD</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">FONT_WEIGHT_XXBOLD</span> <span class="o">=</span> <span class="mi">6</span>

<span class="n">CMODEL_RGB</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">CMODEL_CMY</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">CMODEL_HSV</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">C_BLACK</span> <span class="o">=</span> <span class="mi">67108863</span>
<span class="n">C_RED</span> <span class="o">=</span> <span class="mi">33554687</span>
<span class="n">C_GREEN</span> <span class="o">=</span> <span class="mi">33619712</span>
<span class="n">C_BLUE</span> <span class="o">=</span> <span class="mi">50266112</span>
<span class="n">C_CYAN</span> <span class="o">=</span> <span class="mi">50331903</span>
<span class="n">C_MAGENTA</span> <span class="o">=</span> <span class="mi">50396928</span>
<span class="n">C_YELLOW</span> <span class="o">=</span> <span class="mi">67043328</span>
<span class="n">C_GREY</span> <span class="o">=</span> <span class="mi">41975936</span>
<span class="n">C_LT_RED</span> <span class="o">=</span> <span class="mi">54542336</span>
<span class="n">C_LT_GREEN</span> <span class="o">=</span> <span class="mi">54526016</span>
<span class="n">C_LT_BLUE</span> <span class="o">=</span> <span class="mi">50348096</span>
<span class="n">C_LT_CYAN</span> <span class="o">=</span> <span class="mi">50331712</span>
<span class="n">C_LT_MAGENTA</span> <span class="o">=</span> <span class="mi">50348032</span>
<span class="n">C_LT_YELLOW</span> <span class="o">=</span> <span class="mi">54525952</span>
<span class="n">C_LT_GREY</span> <span class="o">=</span> <span class="mi">54542400</span>
<span class="n">C_GREY10</span> <span class="o">=</span> <span class="mi">51910680</span>
<span class="n">C_GREY25</span> <span class="o">=</span> <span class="mi">54542400</span>
<span class="n">C_GREY50</span> <span class="o">=</span> <span class="mi">41975936</span>
<span class="n">C_WHITE</span> <span class="o">=</span> <span class="mi">50331648</span>
<span class="n">C_TRANSPARENT</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">REF_BOTTOM_LEFT</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">REF_BOTTOM_CENTER</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">REF_BOTTOM_RIGHT</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">REF_CENTER_LEFT</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">REF_CENTER</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">REF_CENTER_RIGHT</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">REF_TOP_LEFT</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">REF_TOP_CENTER</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">REF_TOP_RIGHT</span> <span class="o">=</span> <span class="mi">8</span>

<span class="n">GROUP_ALL</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">GROUP_MARKED</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">GROUP_VISIBLE</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">GROUP_AGG</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">GROUP_CSYMB</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">GROUP_VOXD</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">LOCATE_FIT</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_RELOCATE_FIT</span>
<span class="n">LOCATE_FIT_KEEP_ASPECT</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_RELOCATE_ASPECT</span>
<span class="n">LOCATE_CENTER</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_RELOCATE_ASPECT_CENTER</span>

<span class="n">COLOR_BAR_RIGHT</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">COLOR_BAR_LEFT</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">COLOR_BAR_BOTTOM</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">COLOR_BAR_TOP</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">COLOR_BAR_ANNOTATE_RIGHT</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">COLOR_BAR_ANNOTATE_LEFT</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">COLOR_BAR_ANNOTATE_TOP</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">COLOR_BAR_ANNOTATE_BOTTOM</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

<span class="n">CYLINDER_OPEN</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">CYLINDER_CLOSE_START</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">CYLINDER_CLOSE_END</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">CYLINDER_CLOSE_ALL</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">POINT_STYLE_DOT</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">POINT_STYLE_SPHERE</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">LINE3D_STYLE_LINE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">LINE3D_STYLE_TUBE</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">LINE3D_STYLE_TUBE_JOINED</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">SURFACE_FLAT</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_DRAWOBJ3D_MODE_FLAT</span>
<span class="n">SURFACE_SMOOTH</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_DRAWOBJ3D_MODE_SMOOTH</span>

<span class="n">_uom_attr</span> <span class="o">=</span> <span class="s1">&#39;/geosoft/data/unit_of_measure&#39;</span>


<div class="viewcode-block" id="face_normals_np"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.face_normals_np">[docs]</a><span class="k">def</span> <span class="nf">face_normals_np</span><span class="p">(</span><span class="n">faces</span><span class="p">,</span> <span class="n">verticies</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return normals of the verticies based on tringular faces, assuming right-hand</span>
<span class="sd">    winding of vertex for each face.</span>

<span class="sd">    :param faces:       faces as array of triangle indexes into verticies, shaped (-1, 3)</span>
<span class="sd">    :param verticies:   verticies as array of (x, y, z) shaped (-1, 3)</span>
<span class="sd">    :return:            face normals shaped (-1, 3)</span>

<span class="sd">    The normal of a zero area face will be np.nan</span>

<span class="sd">    .. versionadded:: 9.3.1</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tris</span> <span class="o">=</span> <span class="n">verticies</span><span class="p">[</span><span class="n">faces</span><span class="p">]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">tris</span><span class="p">[::,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">tris</span><span class="p">[::,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">tris</span><span class="p">[::,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">tris</span><span class="p">[::,</span> <span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">gxu</span><span class="o">.</span><span class="n">vector_normalize</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></div>


<div class="viewcode-block" id="vertex_normals_np"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.vertex_normals_np">[docs]</a><span class="k">def</span> <span class="nf">vertex_normals_np</span><span class="p">(</span><span class="n">faces</span><span class="p">,</span> <span class="n">verticies</span><span class="p">,</span> <span class="n">normal_area</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return normals of the verticies based on tringular faces, assuming right-hand</span>
<span class="sd">    winding of vertex for each face.</span>

<span class="sd">    :param faces:       faces as array of triangle indexes into verticies, shaped (-1, 3)</span>
<span class="sd">    :param verticies:   verticies as array of (x, y, z) shaped (-1, 3)</span>
<span class="sd">    :param normal_area: True to weight normals by the area of the connected faces.</span>
<span class="sd">    :return:            vertex normals shaped (-1, 3)</span>

<span class="sd">    .. versionadded:: 9.3.1</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">n</span> <span class="o">=</span> <span class="n">face_normals_np</span><span class="p">(</span><span class="n">faces</span><span class="p">,</span> <span class="n">verticies</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">normal_area</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">gxu</span><span class="o">.</span><span class="n">vector_normalize</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">verticies</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
    <span class="n">normals</span><span class="p">[</span><span class="n">faces</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]]</span> <span class="o">+=</span> <span class="n">n</span>
    <span class="n">normals</span><span class="p">[</span><span class="n">faces</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]]</span> <span class="o">+=</span> <span class="n">n</span>
    <span class="n">normals</span><span class="p">[</span><span class="n">faces</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]]</span> <span class="o">+=</span> <span class="n">n</span>
    <span class="k">return</span> <span class="n">gxu</span><span class="o">.</span><span class="n">vector_normalize</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span></div>


<div class="viewcode-block" id="vertex_normals_vv"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.vertex_normals_vv">[docs]</a><span class="k">def</span> <span class="nf">vertex_normals_vv</span><span class="p">(</span><span class="n">faces</span><span class="p">,</span> <span class="n">verticies</span><span class="p">,</span> <span class="n">normal_area</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return normals of the verticies based on tringular faces, assuming right-hand</span>
<span class="sd">    winding of vertex for each face.</span>

<span class="sd">    :param faces:       (i1, i2, i3) `geosoft.gxpy.vv.GXvv` faces as array of triangle indexes into verticies</span>
<span class="sd">    :param verticies:   (vx, vy, vz) `geosoft.gxpy.vv.GXvv` verticies</span>
<span class="sd">    :param normal_area: True to weight normals by the area of the connected faces.</span>
<span class="sd">    :return:            (nx, ny, nz) `geosoft.gxpy.vv.GXvv` normals</span>

<span class="sd">    .. versionadded:: 9.3.1</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">faces</span> <span class="o">=</span> <span class="n">gxvv</span><span class="o">.</span><span class="n">np_from_vvset</span><span class="p">(</span><span class="n">faces</span><span class="p">)</span>
    <span class="n">verticies</span> <span class="o">=</span> <span class="n">gxvv</span><span class="o">.</span><span class="n">np_from_vvset</span><span class="p">(</span><span class="n">verticies</span><span class="p">)</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">vertex_normals_np</span><span class="p">(</span><span class="n">faces</span><span class="p">,</span> <span class="n">verticies</span><span class="p">,</span> <span class="n">normal_area</span><span class="o">=</span><span class="n">normal_area</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">(</span><span class="n">n</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]),</span> <span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">(</span><span class="n">n</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]),</span> <span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">(</span><span class="n">n</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">])</span></div>


<div class="viewcode-block" id="color_from_string"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.color_from_string">[docs]</a><span class="k">def</span> <span class="nf">color_from_string</span><span class="p">(</span><span class="n">cstr</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a Geosoft color number from a color string.</span>

<span class="sd">    :param cstr:    color string (see below)</span>
<span class="sd">    :returns:       color</span>

<span class="sd">    Colour strings may be &quot;R&quot;, &quot;G&quot;, &quot;B&quot;, &quot;C&quot;, &quot;M&quot;, &quot;Y&quot;,</span>
<span class="sd">    &quot;H&quot;, &quot;S&quot;, &quot;V&quot;, or &quot;K&quot; or a combination of these</span>
<span class="sd">    characters, each followed by up to three digits</span>
<span class="sd">    specifying a number between 0 and 255.</span>
<span class="sd">    An empty string will produce C_ANY_NONE.</span>

<span class="sd">    You must stay in the same color model, RGB, CMY,</span>
<span class="sd">    HSV or K.</span>

<span class="sd">    For example &quot;R&quot;, &quot;R127G22&quot;, &quot;H255S127V32&quot;</span>

<span class="sd">    Characters are not case sensitive.</span>

<span class="sd">    .. versionadded:: 9.3</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXMVIEW</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">cstr</span><span class="p">))</span></div>


<div class="viewcode-block" id="edge_reference"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.edge_reference">[docs]</a><span class="k">def</span> <span class="nf">edge_reference</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">reference</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Location of a reference point of an area.</span>
<span class="sd">    </span>
<span class="sd">    :param area:        :class:`Point2` instance, or (x0, y0, x1, y1)</span>
<span class="sd">    :param reference:   reference point relative to the clip limits of the view to</span>
<span class="sd">                        which reference location.  The points are:</span>
<span class="sd">                        </span>
<span class="sd">                        ::</span>
<span class="sd">                            </span>
<span class="sd">                            6 7 8   top left, center, right</span>
<span class="sd">                            3 4 5   middle left, center, right</span>
<span class="sd">                            0 1 2   bottom left, center, right</span>
<span class="sd">    </span>
<span class="sd">    :returns:           Point desired reference location as a Point</span>

<span class="sd">    .. versionadded:: 9.2</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">):</span>
        <span class="n">area</span> <span class="o">=</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">(</span><span class="n">area</span><span class="p">)</span>
    <span class="n">centroid</span> <span class="o">=</span> <span class="n">area</span><span class="o">.</span><span class="n">centroid</span>
    <span class="n">half_dim</span> <span class="o">=</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">area</span><span class="o">.</span><span class="n">dimension</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.5</span>
    <span class="n">xoff</span> <span class="o">=</span> <span class="n">yoff</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">if</span> <span class="n">reference</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
        <span class="n">yoff</span> <span class="o">=</span> <span class="o">-</span><span class="n">half_dim</span><span class="o">.</span><span class="n">y</span>
    <span class="k">elif</span> <span class="n">reference</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">):</span>
        <span class="n">yoff</span> <span class="o">=</span> <span class="n">half_dim</span><span class="o">.</span><span class="n">y</span>
    <span class="k">if</span> <span class="n">reference</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
        <span class="n">xoff</span> <span class="o">=</span> <span class="o">-</span><span class="n">half_dim</span><span class="o">.</span><span class="n">x</span>
    <span class="k">elif</span> <span class="n">reference</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">):</span>
        <span class="n">xoff</span> <span class="o">=</span> <span class="n">half_dim</span><span class="o">.</span><span class="n">x</span>

    <span class="k">return</span> <span class="n">centroid</span> <span class="o">+</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point</span><span class="p">((</span><span class="n">xoff</span><span class="p">,</span> <span class="n">yoff</span><span class="p">))</span></div>


<div class="viewcode-block" id="Group"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Group">[docs]</a><span class="k">class</span> <span class="nc">Group</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Geosoft group class.</span>

<span class="sd">    :parameters:</span>

<span class="sd">        :view:              gxpy.View</span>
<span class="sd">        :name:              group name, default is &quot;_&quot;.</span>
<span class="sd">        :plane:             plane number, or plane name if drawing to a 3D view.  Default is plane number 0.</span>
<span class="sd">        :view_lock:         True to lock the view for a single-stream drawing group.  Default is False.</span>
<span class="sd">        :unit_of_measure:   unit of measurement for data in this group, default is &#39;&#39;</span>
<span class="sd">        :group_3d:          True for a 3D drawing group, default assumes a 2D drawing group to a plane.</span>
<span class="sd">        :mode:              `APPEND` (default), `NEW` or `READ_ONLY`</span>

<span class="sd">    :Properties:</span>

<span class="sd">        :view:              the :class:`geosoft.gxpy.view.View` instance that contains this group</span>
<span class="sd">        :name:              the name of the group</span>
<span class="sd">        :unit_of_measure:   the unit of measurement (uom) for this data in this group</span>
<span class="sd">        :name_uom:          uom decorated group name as it appears in a view</span>
<span class="sd">        :extent:            extent of the group in view units</span>
<span class="sd">        :extent_map_cm:     extent of the group in map cm</span>
<span class="sd">        :drawing_coordinate_system: the coordinate system of drawing coordinates. Setting to None will reset drawing</span>
<span class="sd">                            coordinates to the view cs.  If `drawing_coordinate_system` is set to some other cs the</span>
<span class="sd">                            drawing coordinates will be transformed into the view cs.</span>

<span class="sd">    .. versionadded:: 9.2</span>

<span class="sd">    .. versionchanged:: 9.3 added support for `unit_of_measure`</span>

<span class="sd">    .. versionchanged:: 9.3.1 added mode=REPLACE and changed mode=NEW to always create a new unique group.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xtype</span><span class="p">,</span> <span class="n">xvalue</span><span class="p">,</span> <span class="n">xtraceback</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__del__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_close&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_open&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_open</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_drawing_coordinate_system</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_text_def</span> <span class="o">=</span> <span class="kc">None</span>

                    <span class="c1"># write metadata</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_meta</span><span class="p">:</span>
                        <span class="n">bf</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXBF</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">BF_READWRITE_NEW</span><span class="p">)</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">gxmeta</span><span class="o">.</span><span class="n">serial</span><span class="p">(</span><span class="n">bf</span><span class="p">)</span>
                            <span class="n">bf</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">BF_SEEK_START</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">write_group_storage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="s2">&quot;Geosoft_META&quot;</span><span class="p">,</span> <span class="n">bf</span><span class="p">)</span>
                        <span class="k">finally</span><span class="p">:</span>
                            <span class="k">del</span> <span class="n">bf</span>

                <span class="k">finally</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_view</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_open</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_new_meta</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">is_3d</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_3d</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">current_3d_drawing_plane</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<div class="viewcode-block" id="Group.__init__"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Group.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">view</span><span class="p">,</span>
                 <span class="n">name</span><span class="o">=</span><span class="s1">&#39;_&#39;</span><span class="p">,</span>
                 <span class="n">plane</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">view_lock</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">mode</span><span class="o">=</span><span class="n">APPEND</span><span class="p">,</span>
                 <span class="n">unit_of_measure</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">group_3d</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="n">view</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span>

        <span class="n">_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="n">_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">view</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;This view is locked by group </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">lock</span><span class="p">)))</span>
            <span class="k">if</span> <span class="n">view_lock</span><span class="p">:</span>
                <span class="n">view</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">group_3d</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">view</span><span class="o">.</span><span class="n">is_3d</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">group_3d</span> <span class="o">=</span> <span class="n">group_3d</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">group_3d</span><span class="p">:</span>
                <span class="c1"># setup a 2D drawing plane for this 2D group</span>
                <span class="k">if</span> <span class="n">plane</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">view</span><span class="o">.</span><span class="n">current_3d_drawing_plane</span><span class="p">:</span>
                        <span class="n">plane</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">current_3d_drawing_plane</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">plane</span> <span class="o">=</span> <span class="s1">&#39;Plane&#39;</span>
                <span class="n">view</span><span class="o">.</span><span class="n">current_3d_drawing_plane</span> <span class="o">=</span> <span class="n">plane</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span> <span class="o">=</span> <span class="n">view</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">mode</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_new_meta</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">REPLACE</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">exist_group</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">delete_group</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">NEW</span><span class="p">:</span>
            <span class="c1"># if the group exists, find a new unique group name</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">exist_group</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">gxu</span><span class="o">.</span><span class="n">unique_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">exist_group</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">exist_group</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
            <span class="n">group_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">find_group</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">group_storage_exists</span><span class="p">(</span><span class="n">group_number</span><span class="p">,</span> <span class="s2">&quot;Geosoft_META&quot;</span><span class="p">):</span>
                <span class="n">bf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">read_group_storage</span><span class="p">(</span><span class="n">group_number</span><span class="p">,</span> <span class="s2">&quot;Geosoft_META&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">bf</span><span class="o">.</span><span class="n">size</span><span class="p">():</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span> <span class="o">=</span> <span class="n">gxmeta</span><span class="o">.</span><span class="n">Metadata</span><span class="p">(</span><span class="n">gxapi</span><span class="o">.</span><span class="n">GXMETA</span><span class="o">.</span><span class="n">create_s</span><span class="p">(</span><span class="n">bf</span><span class="p">))</span>
                    <span class="k">finally</span><span class="p">:</span>
                        <span class="k">del</span> <span class="n">bf</span>

        <span class="k">if</span> <span class="n">unit_of_measure</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unit_of_measure</span> <span class="o">=</span> <span class="n">unit_of_measure</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">start_group</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_open</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Group.close"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Group.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Close the group, unlocks the view&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">()</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">guid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The group GUID.</span>

<span class="sd">        .. versionadded:: 9.3</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sr</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">str_ref</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">get_group_guid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sr</span><span class="o">.</span><span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;view that contains this group.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;group name&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">drawing_plane</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; drawing plane of this group, None for a group in a 2D view.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">is_3d</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">current_3d_drawing_plane</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">unit_of_measure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Unit of measure for scalar data contained in this group. This is only relevant</span>
<span class="sd">        for groups that contain scalar data, such as a Colour_symbols_group. For</span>
<span class="sd">        the spatial unit_of_measure use :attr:`drawing_coordinate_system.unit_of_measure`</span>

<span class="sd">        Can be set.</span>

<span class="sd">        ..versionadded:: 9.3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gxm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gx_metadata</span>
        <span class="k">if</span> <span class="n">gxm</span><span class="o">.</span><span class="n">has_attribute</span><span class="p">(</span><span class="n">_uom_attr</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">gxm</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="n">_uom_attr</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="nd">@unit_of_measure</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">unit_of_measure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uom</span><span class="p">):</span>
        <span class="n">gxm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gx_metadata</span>
        <span class="n">gxm</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span><span class="n">_uom_attr</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">uom</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gx_metadata</span> <span class="o">=</span> <span class="n">gxm</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;group number in the view&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">find_group</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">UNIT_VIEW</span><span class="p">):</span>
        <span class="n">xmin</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">float_ref</span><span class="p">()</span>
        <span class="n">ymin</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">float_ref</span><span class="p">()</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">float_ref</span><span class="p">()</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">float_ref</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">get_group_extent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xmin</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">ymin</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">xmax</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">ymax</span><span class="o">.</span><span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">extent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;group extent as (xmin, ymin, xmax, ymax) in view units&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extent</span><span class="p">(</span><span class="n">UNIT_VIEW</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">visible</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;True if group is visible, can be set.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">group_list_visible</span>

    <span class="nd">@visible</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">visible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visibility</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">!=</span> <span class="n">visibility</span><span class="p">:</span>
            <span class="n">marked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">group_list_marked</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">mark_all_groups</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">mark_group</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">visibility</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">hide_marked_groups</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">hide_marked_groups</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">mark_all_groups</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">marked</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">mark_group</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<div class="viewcode-block" id="Group.extent_map_cm"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Group.extent_map_cm">[docs]</a>    <span class="k">def</span> <span class="nf">extent_map_cm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return an extent in map cm.</span>

<span class="sd">        :param extent: an extent in view units as a tuple (xmin, ymin, xmax, ymax), Default is the group extent.</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">extent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extent</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">view_to_map_cm</span><span class="p">(</span><span class="n">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">view_to_map_cm</span><span class="p">(</span><span class="n">extent</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">extent</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span></div>

<div class="viewcode-block" id="Group.locate"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Group.locate">[docs]</a>    <span class="k">def</span> <span class="nf">locate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">reference</span><span class="o">=</span><span class="n">REF_CENTER</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Locate the group relative to a point.</span>

<span class="sd">        :param location:    location (x, y) or a `geosoft.gxpy.geometry.Point`</span>
<span class="sd">        :param reference:   reference point relative to the clip limits of the view to</span>
<span class="sd">                            which reference location.  The points are:</span>
<span class="sd">                            </span>
<span class="sd">                                ::</span>
<span class="sd">                                    </span>
<span class="sd">                                    6 7 8   top left, center, right</span>
<span class="sd">                                    3 4 5   center left, center, right</span>
<span class="sd">                                    0 1 2   bottom left, center, right</span>


<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">area</span> <span class="o">=</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extent</span><span class="p">)</span>
        <span class="n">area</span> <span class="o">-=</span> <span class="n">area</span><span class="o">.</span><span class="n">centroid</span>
        <span class="n">area</span> <span class="o">-=</span> <span class="n">edge_reference</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">reference</span><span class="p">)</span>
        <span class="n">area</span> <span class="o">+=</span> <span class="n">location</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">relocate_group</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                        <span class="n">area</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">area</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">area</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">area</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
                                        <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_RELOCATE_ASPECT_CENTER</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gx_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The group metadata as a Geosoft `geosoft.gxpy.metadata.Metadata` instance. This metadata</span>
<span class="sd">        may contain standard Geosoft metadata, such as unit_of_measure for data contained in the group,</span>
<span class="sd">        and you can add your own metadata spexific to your application. See `geosoft.gxpy.metadata.Metadata`</span>
<span class="sd">        for information about working with metadata.</span>

<span class="sd">        Can be set, in which case the metadata is replaced by the new metadata. Normally you will get the current</span>
<span class="sd">        metadata, add to or modify, then set it back.</span>

<span class="sd">        .. versionadded:: 9.3</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">gxmeta</span><span class="o">.</span><span class="n">Metadata</span><span class="p">()</span>

    <span class="nd">@gx_metadata</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">gx_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">meta</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_meta</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span> <span class="o">=</span> <span class="n">meta</span></div>


<span class="k">def</span> <span class="nf">_draw</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="n">READ_ONLY</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">_t</span><span class="p">(</span><span class="s1">&#39;This view is read-only.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_init_pen</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;pen&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">cur_pen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pen</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pen</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;pen&#39;</span><span class="p">)</span>
                <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pen</span> <span class="o">=</span> <span class="n">cur_pen</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">wrapper</span>


<span class="k">def</span> <span class="nf">_make_point</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">p</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_make_point2</span><span class="p">(</span><span class="n">p2</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">p2</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_make_ppoint</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">PPoint</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">p</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">PPoint</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>


<div class="viewcode-block" id="Draw"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw">[docs]</a><span class="k">class</span> <span class="nc">Draw</span><span class="p">(</span><span class="n">Group</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create (start) a drawing group for 2D drawing elements.</span>

<span class="sd">    On a 3D view, 2D drawing elements are placed on the default drawing plane.</span>
<span class="sd">    Drawing groups will lock the view such that only one drawing group can be instantiated at a time.</span>
<span class="sd">    </span>
<span class="sd">    Use `with Draw() as group:` to ensure correct unlocking when complete.</span>
<span class="sd">    </span>
<span class="sd">    Inherits from the `Group` base class. See `Group` arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Draw.__init__"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;view_lock&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text_def</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_drawing_coordinate_system</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">!=</span> <span class="n">READ_ONLY</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_init_pen</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_text_def</span> <span class="o">=</span> <span class="n">Text_def</span><span class="p">(</span><span class="n">factor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_set_dot_symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># this is a hack because we cannot draw a box or a zero-length line, so</span>
        <span class="c1"># instead we draw a filled box</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">symb_number</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">symb_color</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">symb_fill_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">line_color</span><span class="o">.</span><span class="n">int_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">symb_size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">line_thick</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">group_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Group opacity setting. Can be set</span>

<span class="sd">        :return:    opacity 0. to 1. (opaque)</span>

<span class="sd">        .. versionadded 9.3.1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fref</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">float_ref</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">get_group_transparency</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">fref</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fref</span><span class="o">.</span><span class="n">value</span>

    <span class="nd">@group_opacity</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">group_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">set_group_transparency</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">op</span><span class="p">),</span> <span class="mf">0.</span><span class="p">),</span> <span class="mf">1.</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">drawing_coordinate_system</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The coordinate of incoming spatial data, which are converted to the coordinate system of the</span>
<span class="sd">        view.  This is normally the same as the view coordinate system, but it can be set to a different</span>
<span class="sd">        coordinate system to have automatic reprojection occur during drawing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_drawing_coordinate_system</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">coordinate_system</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_drawing_coordinate_system</span>

    <span class="nd">@drawing_coordinate_system</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">drawing_coordinate_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">cs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">set_user_ipj</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">coordinate_system</span><span class="o">.</span><span class="n">gxipj</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_drawing_coordinate_system</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_drawing_coordinate_system</span> <span class="o">=</span> <span class="n">gxcs</span><span class="o">.</span><span class="n">Coordinate_system</span><span class="p">(</span><span class="n">cs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">set_user_ipj</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_drawing_coordinate_system</span><span class="o">.</span><span class="n">gxipj</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;the current drawing pen as a :class:`Pen` instance&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span>

    <span class="nd">@pen</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">pen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pen</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="n">READ_ONLY</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">_t</span><span class="p">(</span><span class="s1">&#39;This view is read-only.&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">pen</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">pen</span> <span class="o">=</span> <span class="n">Pen</span><span class="o">.</span><span class="n">from_mapplot_string</span><span class="p">(</span><span class="n">pen</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">line_color</span> <span class="o">!=</span> <span class="n">pen</span><span class="o">.</span><span class="n">line_color</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">line_color</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">line_color</span><span class="o">.</span><span class="n">int_value</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">line_thick</span> <span class="o">!=</span> <span class="n">pen</span><span class="o">.</span><span class="n">line_thick</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">line_thick</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">line_thick</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">line_smooth</span> <span class="o">!=</span> <span class="n">pen</span><span class="o">.</span><span class="n">line_smooth</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">line_smooth</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">line_smooth</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">line_style</span> <span class="o">!=</span> <span class="n">pen</span><span class="o">.</span><span class="n">line_style</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">line_pitch</span> <span class="o">!=</span> <span class="n">pen</span><span class="o">.</span><span class="n">line_pitch</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">line_style</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">line_style</span><span class="p">,</span> <span class="n">pen</span><span class="o">.</span><span class="n">line_pitch</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">fill_color</span> <span class="o">!=</span> <span class="n">pen</span><span class="o">.</span><span class="n">fill_color</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">fill_color</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">fill_color</span><span class="o">.</span><span class="n">int_value</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">pat_number</span> <span class="o">!=</span> <span class="n">pen</span><span class="o">.</span><span class="n">pat_number</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">pat_number</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">pat_number</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">pat_angle</span> <span class="o">!=</span> <span class="n">pen</span><span class="o">.</span><span class="n">pat_angle</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">pat_angle</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">pat_angle</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">pat_density</span> <span class="o">!=</span> <span class="n">pen</span><span class="o">.</span><span class="n">pat_density</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">pat_density</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">pat_density</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">pat_size</span> <span class="o">!=</span> <span class="n">pen</span><span class="o">.</span><span class="n">pat_size</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">pat_size</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">pat_size</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">pat_style</span> <span class="o">!=</span> <span class="n">pen</span><span class="o">.</span><span class="n">pat_style</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">pat_style</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">pat_style</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">pat_thick</span> <span class="o">!=</span> <span class="n">pen</span><span class="o">.</span><span class="n">pat_thick</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">pat_thick</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">pat_thick</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span> <span class="o">=</span> <span class="n">pen</span>

    <span class="k">def</span> <span class="nf">_init_pen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">scm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span>
        <span class="n">pen</span> <span class="o">=</span> <span class="n">Pen</span><span class="p">(</span><span class="n">line_thick</span><span class="o">=</span><span class="mf">0.02</span> <span class="o">*</span> <span class="n">scm</span><span class="p">,</span>
                  <span class="n">line_pitch</span><span class="o">=</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">scm</span><span class="p">,</span>
                  <span class="n">pat_size</span><span class="o">=</span><span class="mf">0.25</span> <span class="o">*</span> <span class="n">scm</span><span class="p">,</span>
                  <span class="n">pat_thick</span><span class="o">=</span><span class="mf">0.02</span> <span class="o">*</span> <span class="n">scm</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">line_color</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">line_color</span><span class="o">.</span><span class="n">int_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">line_thick</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">line_thick</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">line_smooth</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">line_smooth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">line_style</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">line_style</span><span class="p">,</span> <span class="n">pen</span><span class="o">.</span><span class="n">line_pitch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">fill_color</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">fill_color</span><span class="o">.</span><span class="n">int_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">pat_number</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">pat_number</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">pat_angle</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">pat_angle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">pat_density</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">pat_density</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">pat_size</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">pat_size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">pat_style</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">pat_style</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">pat_thick</span><span class="p">(</span><span class="n">pen</span><span class="o">.</span><span class="n">pat_thick</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span> <span class="o">=</span> <span class="n">pen</span>

<div class="viewcode-block" id="Draw.new_pen"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw.new_pen">[docs]</a>    <span class="k">def</span> <span class="nf">new_pen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a pen that inherits default from the current view pen.  Arguments are the same</span>
<span class="sd">        as the `Pen` constructor.  This using this ensures that default sizing of view unit-based</span>
<span class="sd">        dimensions (such as `line_thick`) are not lost when new pens are created.</span>

<span class="sd">        :param kwargs: see :class:`Pen`</span>
<span class="sd">        :returns: :class:`Pen` instance</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Pen</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">text_def</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;the current text definition as a :class:`Text_def` instance, can be set.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text_def</span>

    <span class="nd">@text_def</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">text_def</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text_def</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="n">READ_ONLY</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">_t</span><span class="p">(</span><span class="s1">&#39;This view is read-only.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text_def</span> <span class="o">!=</span> <span class="n">text_def</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_text_def</span> <span class="o">=</span> <span class="n">text_def</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">text_font</span><span class="p">(</span><span class="n">text_def</span><span class="o">.</span><span class="n">font</span><span class="p">,</span>
                                       <span class="n">text_def</span><span class="o">.</span><span class="n">gfn</span><span class="p">,</span>
                                       <span class="n">text_def</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span>
                                       <span class="n">text_def</span><span class="o">.</span><span class="n">italics</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">text_size</span><span class="p">(</span><span class="n">text_def</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">text_color</span><span class="p">(</span><span class="n">text_def</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">int_value</span><span class="p">)</span>

<div class="viewcode-block" id="Draw.text_extent"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw.text_extent">[docs]</a>    <span class="k">def</span> <span class="nf">text_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">text_def</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the extent of a text string in view units relative to the current</span>
<span class="sd">        text `text_def` setting, or the specified `text_def` setting.</span>

<span class="sd">        :param str: text string</span>
<span class="sd">        :param text_def: `text_def` instance, None for the current setting</span>
<span class="sd">        :return: `geosoft.geometry.Point2` instance</span>

<span class="sd">        .. versionadded:: 9.4</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x0</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">float_ref</span><span class="p">()</span>
        <span class="n">y0</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">float_ref</span><span class="p">()</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">float_ref</span><span class="p">()</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">float_ref</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">text_def</span><span class="p">:</span>
            <span class="n">cur_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text_def</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_def</span> <span class="o">=</span> <span class="n">text_def</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cur_text</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">measure_text</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cur_text</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_def</span> <span class="o">=</span> <span class="n">cur_text</span>

        <span class="k">return</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">(((</span><span class="n">x0</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">y0</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="p">(</span><span class="n">x1</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">y1</span><span class="o">.</span><span class="n">value</span><span class="p">)),</span>
                           <span class="n">coordinate_system</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">coordinate_system</span><span class="p">)</span></div>

<div class="viewcode-block" id="Draw.point"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw.point">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a point.</span>

<span class="sd">        :param p:   point location as `geosoft.gxpy.geometry.Point`</span>

<span class="sd">        .. versionadded:: 9.3</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># just draw a box. TODO: MVIEW needs a way to draw a dot, and/or address issue #44</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_dot_symbol</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">symbol</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Draw.polypoint"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw.polypoint">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">polypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw many points.</span>

<span class="sd">        :param pp:  point location as `geosoft.gxpy.geometry.PPoint`, or a pair of VVs (vvx, vvy), or</span>
<span class="sd">                    something that `gxpy.geometry.PPoint` can construct into a PP.</span>

<span class="sd">        .. versionadded:: 9.3</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_dot_symbol</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">)):</span>
            <span class="n">pp</span> <span class="o">=</span> <span class="n">_make_ppoint</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span>
            <span class="n">pp</span> <span class="o">=</span> <span class="p">(</span><span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="n">pp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">pp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">gxvv</span><span class="p">)</span></div>

<div class="viewcode-block" id="Draw.line"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw.line">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a line on the current plane</span>
<span class="sd">        </span>
<span class="sd">        :param p2: :class:`geometry.Point2`, or (p1, p2)</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">p2</span> <span class="o">=</span> <span class="n">_make_point2</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Draw.polyline"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw.polyline">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">polyline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pp</span><span class="p">,</span> <span class="n">close</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a polyline the current plane</span>
<span class="sd">        </span>
<span class="sd">        :param pp:      `geosoft.gxpy.geometry.PPoint` instance or something that can be constructed, or a</span>
<span class="sd">                        pair of `geosoft.gxpy.vv.GXvv` (xvv, yvv)</span>
<span class="sd">        :param close:   if True, draw a polygon, default is a polyline</span>

<span class="sd">        .. note::</span>
<span class="sd">            Smooth-line polygons must have at least 6 points for the closure to</span>
<span class="sd">            appear continuous.</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pp</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">)):</span>
            <span class="n">pp</span> <span class="o">=</span> <span class="n">_make_ppoint</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span>
            <span class="n">pp</span> <span class="o">=</span> <span class="p">(</span><span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">close</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">poly_line</span><span class="p">(</span><span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_DRAW_POLYGON</span><span class="p">,</span> <span class="n">pp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">pp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">gxvv</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">poly_line</span><span class="p">(</span><span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_DRAW_POLYLINE</span><span class="p">,</span> <span class="n">pp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">pp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">gxvv</span><span class="p">)</span></div>

<div class="viewcode-block" id="Draw.polygon"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw.polygon">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a polygon on the current plane.</span>
<span class="sd">        </span>
<span class="sd">        :param pp: :class:`geosoft.gxpy.geometry.PPoint`</span>

<span class="sd">        .. note::</span>
<span class="sd">            Smooth-line polygons must have at least 6 points for the closure to</span>
<span class="sd">            appear continuous.</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">polyline</span><span class="p">(</span><span class="n">pp</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="Draw.rectangle"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw.rectangle">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a 2D rectangle on the current plane</span>
<span class="sd">        :param p2: geometry.Point2, or (p1, p2), or (x0, y0, x2, y2)</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">p2</span> <span class="o">=</span> <span class="n">_make_point2</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="Draw.graticule"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw.graticule">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">graticule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ddx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ddy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">GRATICULE_LINE</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a graticule reference on a view.</span>

<span class="sd">        :param style:   `GRATICULE_LINE`, `GRATICULE_CROSS` or `GRATICULE_DOT`</span>
<span class="sd">        :param dx:      vertical line separation</span>
<span class="sd">        :param dy:      horizontal line separation</span>
<span class="sd">        :param ddx:     horizontal cross size for `GRATICULE_CROSS`</span>
<span class="sd">        :param ddy:     vertical cross size for `GRATICULE_CROSS`</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">ext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extent</span>
        <span class="k">if</span> <span class="n">dx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="p">(</span><span class="n">ext</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">ext</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.2</span>
            <span class="n">ddx</span> <span class="o">=</span> <span class="n">dx</span> <span class="o">*</span> <span class="mf">0.25</span>
        <span class="k">if</span> <span class="n">dy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="p">(</span><span class="n">ext</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">ext</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="mf">0.2</span>
            <span class="n">ddy</span> <span class="o">=</span> <span class="n">dy</span> <span class="o">*</span> <span class="mf">0.25</span>
        <span class="k">if</span> <span class="n">ddy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ddy</span> <span class="o">=</span> <span class="n">dy</span> <span class="o">*</span> <span class="mf">0.25</span>
        <span class="k">if</span> <span class="n">ddx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ddx</span> <span class="o">=</span> <span class="n">dx</span> <span class="o">*</span> <span class="mf">0.25</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">ddx</span><span class="p">,</span> <span class="n">ddy</span><span class="p">,</span> <span class="n">style</span><span class="p">)</span></div>

<div class="viewcode-block" id="Draw.text"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw.text">[docs]</a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
             <span class="n">text</span><span class="p">,</span>
             <span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
             <span class="n">reference</span><span class="o">=</span><span class="n">REF_BOTTOM_LEFT</span><span class="p">,</span>
             <span class="n">angle</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span>
             <span class="n">text_def</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw text in the view.</span>
<span class="sd">        </span>
<span class="sd">        :param text:        text string.  Use line-feed characters for multi-line text.</span>
<span class="sd">        :param location:    (x, y) or a `gxpy.geomerty.Point` location</span>
<span class="sd">        :param reference:   Text justification point relative text outline box.</span>
<span class="sd">                            The points are:</span>
<span class="sd">                            </span>
<span class="sd">                                ::</span>
<span class="sd">                                    </span>
<span class="sd">                                    6 7 8   top left, center, right</span>
<span class="sd">                                    3 4 5   middle left, center, right</span>
<span class="sd">                                    0 1 2   bottom left, center, right</span>

<span class="sd">        :param angle:       baseline angle in degrees clockwise</span>
<span class="sd">        :param text_def:    text definition, if not set the current definition is used</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">text_def</span><span class="p">:</span>
            <span class="n">cur_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text_def</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_def</span> <span class="o">=</span> <span class="n">text_def</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cur_text</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">text_ref</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">text_angle</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point</span><span class="p">):</span>
            <span class="n">location</span> <span class="o">=</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">location</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">location</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cur_text</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text_def</span> <span class="o">=</span> <span class="n">cur_text</span></div>

<div class="viewcode-block" id="Draw.contour"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw.contour">[docs]</a>    <span class="k">def</span> <span class="nf">contour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grid_file_name</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw contours for a grid file.</span>
<span class="sd">        </span>
<span class="sd">        :param grid_file_name:  Grid file name</span>
<span class="sd">        :param parameters:      contour parameters, None for default contouring.</span>

<span class="sd">        Parameters can be provided as a list of strings that correspond the contouring control file</span>
<span class="sd">        (starting at control file line 2) as defined on the Geosoft Desktop help topic &#39;CONTCON&#39;. The first</span>
<span class="sd">        &#39;MDF&#39; line, which is used to specify the map scale and drawing location, is not required as the scale</span>
<span class="sd">        and location is fixed by the view.</span>

<span class="sd">        Following are the control file parameters names as they would appear in a text control file:</span>

<span class="sd">        .. code::</span>

<span class="sd">            border, lowtic, smooth, suppop, nth, gtitle     / &#39;general&#39;: {}</span>
<span class="sd">            pdef, ptick, pxval, pframe, psidel              / &#39;special&#39;: {}</span>
<span class="sd">            hlb, htl, hcr, htk, hxv, hsl                    / &#39;text&#39;: {}</span>
<span class="sd">            ominl,cminl,skipa,skipb,skipc,skipd,skipe,skipf / &#39;line&#39;: {}</span>
<span class="sd">            xval, digxv, minxv, markxv                      / &#39;hilo&#39;: {}</span>
<span class="sd">            levopt, conbeg, conend, lbup, lbmult, logopt    / &#39;levels&#39;: {}</span>
<span class="sd">            cint,lintyp,catt,label,dense,digits,conlo,conhi / &#39;contours&#39;: [{}, {}, ...]</span>
<span class="sd">             ...</span>
<span class="sd">             ...  up to 32 contour levels</span>
<span class="sd">             ...</span>

<span class="sd">        Example parameters as text strings:</span>

<span class="sd">        ====================================== =================================================================</span>
<span class="sd">        `parameter=`                           **Outcome**</span>
<span class="sd">        `None`                                 default contour based on the grid data range</span>
<span class="sd">        `(&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;10&#39;)`             multiples of 10</span>
<span class="sd">        `(&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;10&#39;,&#39;50&#39;,&#39;250&#39;)`  multiples of 10, 50 and 100, default attributes</span>
<span class="sd">        `(&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;0&#39;,&#39;0,,,0&#39;)`         single contour (levopt=0) at value 0 (cint=0), no label (label=0)</span>
<span class="sd">        `(&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;0&#39;,&#39;0,,a=rt500,0&#39;)`  red 500 micron thick contour at value 0, no label</span>
<span class="sd">        ====================================== =================================================================</span>

<span class="sd">        Parameters may also be defined in a dictionary using explicit parameter names as shown in the text</span>
<span class="sd">        control file template above.  Each line of parameters is defined by the key name to the right on the `/`,</span>
<span class="sd">        and the &#39;contours&#39; entry is a list, and the values are dictionaries of the parameters to be defines.</span>
<span class="sd">        Parameters that are not defined will have the documented default behaviour.</span>

<span class="sd">        Example parameters as a dictionary:</span>

<span class="sd">        ================================================= ===========================================</span>
<span class="sd">        `parameter=`                                      **Outcome**</span>
<span class="sd">        ------------------------------------------------- -------------------------------------------</span>
<span class="sd">        `{&#39;contours&#39;:[{&#39;cint&#39;:10}]}`                      multiples of 10</span>
<span class="sd">        `{&#39;contours&#39;:[{&#39;cint&#39;:10},{cint&#39;:50}]}`           multiples of 10 and 50, default attributes</span>
<span class="sd">        `{&#39;levels&#39;:{&#39;levopt&#39;:0},[{&#39;cint&#39;:10,&#39;label&#39;:0}]}` single contour at data value = 0, no label</span>
<span class="sd">        ================================================= ===========================================</span>

<span class="sd">        .. versionadded:: 9.2</span>

<span class="sd">        .. versionadded:: 9.4 added parameter controls</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">parms</span><span class="p">(</span><span class="n">set_str</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
            <span class="n">pstr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_str</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
                    <span class="n">pstr</span> <span class="o">=</span> <span class="n">pstr</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">set_str</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="s1">&#39;&#39;</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span>
            <span class="n">pstr</span> <span class="o">=</span> <span class="n">pstr</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; /&#39;</span> <span class="o">+</span> <span class="n">keys</span>
            <span class="k">return</span> <span class="n">pstr</span>

        <span class="n">scale</span><span class="p">,</span> <span class="n">ufac</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">mdf</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">control_file</span> <span class="o">=</span> <span class="n">gx</span><span class="o">.</span><span class="n">gx</span><span class="p">()</span><span class="o">.</span><span class="n">temp_file</span><span class="p">(</span><span class="s1">&#39;.con&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">control_file</span><span class="p">,</span> <span class="s1">&#39;w+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>

            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">,</span><span class="si">{}</span><span class="s1">,</span><span class="si">{}</span><span class="s1">,</span><span class="si">{}</span><span class="s1"> /scale, ufac, x0, y0</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">ufac</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">parameters</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;,,-1/</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parms</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;general&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                                            <span class="s1">&#39;border, lowtic, smooth, suppop, nth, gtitle&#39;</span><span class="p">)))</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parms</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;special&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                                            <span class="s1">&#39;pdef, ptick, pxval, pframe, psidel&#39;</span><span class="p">)))</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parms</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                                            <span class="s1">&#39;hlb, htl, hcr, htk, hxv, hsl&#39;</span><span class="p">)))</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parms</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                                            <span class="s1">&#39;ominl, cminl, skipa, skipb, skipc, skipd, skipe, skipf&#39;</span><span class="p">)))</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parms</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hilo&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                                            <span class="s1">&#39;xval, digxv, minxv, markxv&#39;</span><span class="p">)))</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parms</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;levels&#39;</span><span class="p">,</span> <span class="p">{}),</span>
                                            <span class="s1">&#39;levopt, conbeg, conend, lbup, lbmult, logopt&#39;</span><span class="p">)))</span>
                <span class="n">contours</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;contours&#39;</span><span class="p">,</span> <span class="p">[])</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">contours</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;No contour levels specified.&#39;</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">con</span> <span class="ow">in</span> <span class="n">contours</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parms</span><span class="p">(</span><span class="n">con</span><span class="p">,</span>
                                                <span class="s1">&#39;cint, lintyp, catt, label, dense, digits, conlo, conhi&#39;</span><span class="p">)))</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">pline</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pline</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">geosoft</span><span class="o">.</span><span class="n">gxapi</span><span class="o">.</span><span class="n">GXMVU</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="p">,</span> <span class="n">control_file</span><span class="p">,</span> <span class="n">grid_file_name</span><span class="p">)</span>
        <span class="n">gxu</span><span class="o">.</span><span class="n">delete_file</span><span class="p">(</span><span class="n">control_file</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Draw_3d"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw_3d">[docs]</a><span class="k">class</span> <span class="nc">Draw_3d</span><span class="p">(</span><span class="n">Draw</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a 3D drawing group within a 3D view.</span>

<span class="sd">    3D drawing groups accept 3D drawing objects that can be created using methods of this class.</span>
<span class="sd">    2D objects can also be drawn to a 3D group and will be placed on the default drawing plane</span>
<span class="sd">    within the 3D view.</span>
<span class="sd">    </span>
<span class="sd">    :param render_backfaces:    True to turn backface rendering on.</span>
<span class="sd">    </span>
<span class="sd">    .. versionadded:: 9.2</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Draw_3d.__init__"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw_3d.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">view</span><span class="p">,</span>
                 <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                 <span class="n">render_backfaces</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">gxv</span><span class="o">.</span><span class="n">View_3d</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;View is not 3D&#39;</span><span class="p">))</span>

        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;group_3d&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">render_backfaces</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_backfaces</span> <span class="o">=</span> <span class="kc">True</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">render_backfaces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        True if backface rendering is on, default is off (False).</span>
<span class="sd">        Backface rendering controls the rendering of parts of solid objects that</span>
<span class="sd">        would normally be hidden from view.  If drawing solid objects that have </span>
<span class="sd">        an open face, such as cylinders with an open end, backface rendering will be</span>
<span class="sd">        be turned on.   Once on it cannot be turned off for a view.</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">get_3d_group_flags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mb">0b1</span><span class="p">)</span>

    <span class="nd">@render_backfaces</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">render_backfaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setting</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">setting</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_backfaces</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;Once backface rendering is on it cannot be turned off.&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_backfaces</span><span class="p">:</span>
            <span class="n">f3d</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">get_3d_group_flags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mb">0b11111110</span><span class="p">)</span> <span class="o">|</span> <span class="mb">0b1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">set_3d_group_flags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">,</span> <span class="n">f3d</span><span class="p">)</span>

<div class="viewcode-block" id="Draw_3d.sphere"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw_3d.sphere">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">sphere</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a sphere.</span>

<span class="sd">        :param p:       location as geometry.Point, or (x, y, z)</span>
<span class="sd">        :param radius:  sphere radius</span>
<span class="sd">        </span>
<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># solids use the fill color as the object color</span>
        <span class="n">fci</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">fill_color</span><span class="o">.</span><span class="n">int_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">fill_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">line_color</span><span class="o">.</span><span class="n">int_value</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">_make_point</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">sphere_3d</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="n">radius</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">fill_color</span><span class="p">(</span><span class="n">fci</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">add_extent</span><span class="p">(</span><span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">((</span><span class="n">p</span> <span class="o">-</span> <span class="n">radius</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="n">radius</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Draw_3d.box_3d"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw_3d.box_3d">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">box_3d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">wireframe</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a 3D box</span>
<span class="sd">        </span>
<span class="sd">        :param p2:          box corners as geometry.Point2, or (p0, p1), or (x0, y0, z0, x1, y1, z1)</span>
<span class="sd">        :param wireframe:   True to draw edges only</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># solids use the fill color as the object color</span>
        <span class="n">fci</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">fill_color</span><span class="o">.</span><span class="n">int_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">fill_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">line_color</span><span class="o">.</span><span class="n">int_value</span><span class="p">)</span>
        <span class="n">pp</span> <span class="o">=</span> <span class="n">_make_point2</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">wireframe</span><span class="p">:</span>
                <span class="n">sq</span> <span class="o">=</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">PPoint</span><span class="p">(((</span><span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">),</span>
                                  <span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">),</span>
                                  <span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">),</span>
                                  <span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">),</span>
                                  <span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">polyline_3d</span><span class="p">(</span><span class="n">sq</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">LINE3D_STYLE_TUBE_JOINED</span><span class="p">)</span>
                <span class="n">sq</span> <span class="o">+=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">polyline_3d</span><span class="p">(</span><span class="n">sq</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">LINE3D_STYLE_TUBE_JOINED</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cylinder_3d</span><span class="p">(</span><span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">(((</span><span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">),</span> <span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">z</span><span class="p">))),</span>
                                 <span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">line_thick</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cylinder_3d</span><span class="p">(</span><span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">(((</span><span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">),</span> <span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">z</span><span class="p">))),</span>
                                 <span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">line_thick</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cylinder_3d</span><span class="p">(</span><span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">(((</span><span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">),</span> <span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">z</span><span class="p">))),</span>
                                 <span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">line_thick</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cylinder_3d</span><span class="p">(</span><span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">(((</span><span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">),</span> <span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">z</span><span class="p">))),</span>
                                 <span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">line_thick</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">box_3d</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
                                        <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pp</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">fill_color</span><span class="p">(</span><span class="n">fci</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">add_extent</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">extent</span><span class="p">)</span></div>

<div class="viewcode-block" id="Draw_3d.cylinder_3d"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw_3d.cylinder_3d">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">cylinder_3d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">r2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">close</span><span class="o">=</span><span class="n">CYLINDER_CLOSE_ALL</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a cylinder.</span>
<span class="sd">        </span>
<span class="sd">        :param p2:      end points as geometry.Point2, or (p0, p1), or (x0, y0, z0, x1, y1, z1)</span>
<span class="sd">        :param radius:  cylinder radius.</span>
<span class="sd">        :param r2:      end radius if different from the start</span>
<span class="sd">        :param close:   one of:</span>
<span class="sd">        </span>
<span class="sd">                            ::</span>
<span class="sd">                </span>
<span class="sd">                                CYLINDER_OPEN</span>
<span class="sd">                                CYLINDER_CLOSE_START</span>
<span class="sd">                                CYLINDER_CLOSE_END</span>
<span class="sd">                                CYLINDER_CLOSE_ALL</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># solids use the fill color as the object color</span>
        <span class="n">fci</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">fill_color</span><span class="o">.</span><span class="n">int_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">fill_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">line_color</span><span class="o">.</span><span class="n">int_value</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">close</span> <span class="o">!=</span> <span class="n">CYLINDER_CLOSE_ALL</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_backfaces</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">_make_point2</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">r2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">r2</span> <span class="o">=</span> <span class="n">radius</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">cylinder_3d</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
                                         <span class="n">p2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">p2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
                                         <span class="n">radius</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span>
                                         <span class="n">close</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">fill_color</span><span class="p">(</span><span class="n">fci</span><span class="p">)</span>

        <span class="n">r</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">p2</span><span class="o">.</span><span class="n">extent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">add_extent</span><span class="p">(</span><span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">((</span><span class="n">ext</span><span class="o">.</span><span class="n">p0</span> <span class="o">-</span> <span class="n">r</span><span class="p">,</span> <span class="n">ext</span><span class="o">.</span><span class="n">p1</span> <span class="o">+</span> <span class="n">r</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Draw_3d.cone_3d"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw_3d.cone_3d">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">cone_3d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a cone.</span>

<span class="sd">        :param p2:      end points as geometry.Point2, or (p0, p1), or (x0, y0, z0, x1, y1, z1).</span>
<span class="sd">        :param radius:  cone base radius, base is as the the first point of p2.</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cylinder_3d</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">r2</span><span class="o">=</span><span class="mf">0.</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_poly_3d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">ptype</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_DRAWOBJ3D_MODE_FLAT</span><span class="p">):</span>
        <span class="n">vvx</span><span class="p">,</span> <span class="n">vvy</span><span class="p">,</span> <span class="n">vvz</span> <span class="o">=</span> <span class="n">points</span><span class="o">.</span><span class="n">make_xyz_vv</span><span class="p">()</span>
        <span class="n">null_vv</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXVV</span><span class="o">.</span><span class="n">null</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">draw_object_3d</span><span class="p">(</span><span class="n">ptype</span><span class="p">,</span> <span class="n">smooth</span><span class="p">,</span>
                                        <span class="n">vvx</span><span class="o">.</span><span class="n">length</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="n">vvx</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">vvy</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">vvz</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span>
                                        <span class="n">null_vv</span><span class="p">,</span> <span class="n">null_vv</span><span class="p">,</span> <span class="n">null_vv</span><span class="p">,</span>
                                        <span class="n">null_vv</span><span class="p">,</span> <span class="n">null_vv</span><span class="p">,</span> <span class="n">null_vv</span><span class="p">)</span>

<div class="viewcode-block" id="Draw_3d.polypoint_3d"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw_3d.polypoint_3d">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">polypoint_3d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">POINT_STYLE_DOT</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw multiple points.</span>
<span class="sd">        </span>
<span class="sd">        :param points:  points to draw, :class:`geosoft.gxpy.geometry.PPoint` instance, or array-like [x,y,z]</span>
<span class="sd">        :param style:   POINT_STYLE_DOT or POINT_STYLE_SPHERE.  Dots are fast and intended for point clouds.</span>
<span class="sd">                        The current pen thickness is used as the sphere sizes.</span>
<span class="sd">        </span>
<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">points</span> <span class="o">=</span> <span class="n">_make_ppoint</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">line_thick</span> <span class="o">*</span> <span class="mf">0.5</span>
        <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="n">POINT_STYLE_DOT</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_poly_3d</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_DRAWOBJ3D_ENTITY_POINTS</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">points</span><span class="o">.</span><span class="n">length</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sphere</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">)</span>

        <span class="n">ext</span> <span class="o">=</span> <span class="n">points</span><span class="o">.</span><span class="n">extent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">add_extent</span><span class="p">(</span><span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">((</span><span class="n">ext</span><span class="o">.</span><span class="n">p0</span> <span class="o">-</span> <span class="n">radius</span><span class="p">,</span> <span class="n">ext</span><span class="o">.</span><span class="n">p1</span> <span class="o">+</span> <span class="n">radius</span><span class="p">)))</span></div>


<div class="viewcode-block" id="Draw_3d.polyline_3d"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw_3d.polyline_3d">[docs]</a>    <span class="nd">@_draw</span>
    <span class="k">def</span> <span class="nf">polyline_3d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">LINE3D_STYLE_LINE</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a polyline.</span>
<span class="sd">        </span>
<span class="sd">        :param points:  verticies of the polyline, :class:`geosoft.gxpy.geometry.PPoint` instance, or array-like [x,y,z]</span>
<span class="sd">        :param style:   LINE3D_STYLE_LINE, LINE3D_STYLE_TUBE or LINE3D_STYLE_TUBE_JOINED.</span>
<span class="sd">                        Lines are single-pixel-wide.  Tubes have width defined by the pen line thickness.</span>
<span class="sd">                        Joined tubes have a joints and rounded ends.</span>

<span class="sd">        .. versionadded:: 9.2 </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">_make_ppoint</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">points</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;Need at least two points.&#39;</span><span class="p">))</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">line_thick</span> <span class="o">*</span> <span class="mf">0.5</span>
        <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="n">LINE3D_STYLE_LINE</span><span class="p">:</span>
            <span class="n">vvx</span><span class="p">,</span> <span class="n">vvy</span><span class="p">,</span> <span class="n">vvz</span> <span class="o">=</span> <span class="n">points</span><span class="o">.</span><span class="n">make_xyz_vv</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">poly_line_3d</span><span class="p">(</span><span class="n">vvx</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">vvy</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">vvz</span><span class="o">.</span><span class="n">gxvv</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pen</span> <span class="o">=</span> <span class="n">Pen</span><span class="p">(</span><span class="n">fill_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">line_color</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">points</span><span class="o">.</span><span class="n">length</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cylinder_3d</span><span class="p">(</span><span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">((</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])),</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="n">LINE3D_STYLE_TUBE_JOINED</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">points</span><span class="o">.</span><span class="n">length</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">sphere</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">)</span>

        <span class="n">ext</span> <span class="o">=</span> <span class="n">points</span><span class="o">.</span><span class="n">extent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">add_extent</span><span class="p">(</span><span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">((</span><span class="n">ext</span><span class="o">.</span><span class="n">p0</span> <span class="o">-</span> <span class="n">radius</span><span class="p">,</span> <span class="n">ext</span><span class="o">.</span><span class="n">p1</span> <span class="o">+</span> <span class="n">radius</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Draw_3d.polydata_3d"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Draw_3d.polydata_3d">[docs]</a>    <span class="k">def</span> <span class="nf">polydata_3d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                    <span class="n">data</span><span class="p">,</span>
                    <span class="n">render_info_func</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">passback</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create 3D objects rendered using data attributes.</span>

<span class="sd">        :param data:                iterable that yields items passed to your `render_info_func` callback</span>
<span class="sd">        :param render_info_func:    a callback that given `(item, passback)` returns the rendering `(symbol_type,</span>
<span class="sd">                                    geometry, color_integer, attribute)`:</span>
<span class="sd">                                    </span>
<span class="sd">                                    ================== ======== =============== =========</span>
<span class="sd">                                    Symbol             Geometry Color           Attribute</span>
<span class="sd">                                    ================== ======== =============== =========</span>
<span class="sd">                                    SYMBOL_3D_SPHERE   Point    Color.int_value radius</span>
<span class="sd">                                    SYMBOL_3D_CUBE     Point2   Color.int_value None</span>
<span class="sd">                                    SYMBOL_3D_CYLINDER Point2   Color.int_value radius</span>
<span class="sd">                                    SYMBOL_3D_CONE     Point2   Color.int_value radius</span>
<span class="sd">                                    ================== ======== =============== =========</span>

<span class="sd">        :param passback:            something passed back to your render_info_func function, default None.</span>
<span class="sd">        </span>
<span class="sd">        **Example**</span>
<span class="sd">        </span>
<span class="sd">        .. code::</span>
<span class="sd">        </span>
<span class="sd">            import geosoft.gxpy.geometry as gxgm</span>
<span class="sd">            import geosof.gxpy.view as gxv</span>
<span class="sd">            import geosogt.gxpy.group as gxg</span>
<span class="sd">            </span>
<span class="sd">            def render_spheres(xyz, cmap_radius):</span>
<span class="sd">                color, radius = cmap_radius</span>
<span class="sd">                return gxg.SYMBOL_3D_SPHERE, xyz, color.int_value, radius</span>
<span class="sd">            </span>
<span class="sd">            data = gxgm.PPoint(((5, 5, 5), (7, 5, 5), (7, 7, 7)))</span>
<span class="sd">            with gxv.View_3d.new(&#39;example_polydata&#39;) as v:</span>
<span class="sd">                with gxg.Draw_3d(v, &#39;red_spheres&#39;) as g:</span>
<span class="sd">                    g.polydata_3d(data, render_spheres, (gxg.Color(&#39;r&#39;), 0.25))</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">cint</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">render</span> <span class="o">=</span> <span class="n">render_info_func</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">passback</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">render</span><span class="p">:</span>
                <span class="n">symbol</span><span class="p">,</span> <span class="n">geometry</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">attribute</span> <span class="o">=</span> <span class="n">render</span>

                <span class="k">if</span> <span class="n">color</span> <span class="o">!=</span> <span class="n">cint</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">fill_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
                    <span class="n">cint</span> <span class="o">=</span> <span class="n">color</span>

                <span class="k">if</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">SYMBOL_3D_SPHERE</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">sphere_3d</span><span class="p">(</span><span class="n">geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">geometry</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">geometry</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">attribute</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
                        <span class="n">geometry</span> <span class="o">=</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">geometry</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">SYMBOL_3D_CUBE</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">box_3d</span><span class="p">(</span><span class="n">geometry</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
                                            <span class="n">geometry</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">SYMBOL_3D_CYLINDER</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">cylinder_3d</span><span class="p">(</span><span class="n">geometry</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
                                                 <span class="n">geometry</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
                                                 <span class="n">attribute</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">CYLINDER_CLOSE_ALL</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">symbol</span> <span class="o">==</span> <span class="n">SYMBOL_3D_CONE</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">cylinder_3d</span><span class="p">(</span><span class="n">geometry</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">p0</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
                                                 <span class="n">geometry</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
                                                 <span class="n">attribute</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">CYLINDER_CLOSE_ALL</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;Symbol type not implemented&#39;</span><span class="p">))</span>

                <span class="k">if</span> <span class="n">attribute</span><span class="p">:</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">(</span><span class="n">geometry</span><span class="p">)</span><span class="o">.</span><span class="n">extent</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">add_extent</span><span class="p">((</span><span class="n">e</span><span class="o">.</span><span class="n">p0</span> <span class="o">-</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">p1</span> <span class="o">+</span> <span class="n">attribute</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">add_extent</span><span class="p">(</span><span class="n">geometry</span><span class="o">.</span><span class="n">extent</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_surface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">faces</span><span class="p">,</span> <span class="n">verticies</span><span class="p">,</span> <span class="n">coordinate_system</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        TODO: awaiting resolution of #73</span>

<span class="sd">        Draw a surface defined by faces and verticies</span>

<span class="sd">        :param faces:               triangle faces as indexes into verticies, numpy array (n_faces, 3)</span>
<span class="sd">        :param verticies:           verticies, numpy array (n_verticies, 3)</span>
<span class="sd">        :param coordinate_system:   `geosoft.gxpy.Coordinate_system` instance if not in the drawing CS.</span>

<span class="sd">        .. versionadded:: 9.3.1</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">n_faces</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">faces</span><span class="p">)</span>
        <span class="n">n_verticies</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">verticies</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">faces</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">n_verticies</span> <span class="ow">or</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">faces</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;Faces refer to verticies out of range of verticies.&#39;</span><span class="p">))</span>

        <span class="c1"># TODO validate buffering and rendering performance once #73 is resolved.</span>
        <span class="n">n_buff</span> <span class="o">=</span> <span class="mi">1000</span>
        <span class="n">n_faces_written</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># normals</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="n">vertex_normals_np</span><span class="p">(</span><span class="n">faces</span><span class="p">,</span> <span class="n">verticies</span><span class="p">)</span>

        <span class="c1"># coordinate_system</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">coordinate_system</span><span class="p">,</span> <span class="n">gxcs</span><span class="o">.</span><span class="n">Coordinate_system</span><span class="p">):</span>
            <span class="n">gxipj</span> <span class="o">=</span> <span class="n">coordinate_system</span><span class="o">.</span><span class="n">gxipj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gxipj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawing_coordinate_system</span><span class="o">.</span><span class="n">gxipj</span>

        <span class="c1"># TODO: implement variable colour once issue #73 is addressed</span>
        <span class="c1"># color</span>
        <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">fill_color</span><span class="o">.</span><span class="n">int_value</span>
        <span class="k">if</span> <span class="n">color</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">C_GREY</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">render_backfaces</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">while</span> <span class="n">n_faces_written</span> <span class="o">&lt;</span> <span class="n">n_faces</span><span class="p">:</span>
            <span class="n">n_write</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">n_buff</span><span class="p">,</span> <span class="n">n_faces</span> <span class="o">-</span> <span class="n">n_faces_written</span><span class="p">)</span>
            <span class="n">n_last</span> <span class="o">=</span> <span class="n">n_faces_written</span> <span class="o">+</span> <span class="n">n_write</span>
            <span class="n">faces_buff</span> <span class="o">=</span> <span class="n">faces</span><span class="p">[</span><span class="n">n_faces_written</span><span class="p">:</span> <span class="n">n_last</span><span class="p">]</span>
            <span class="n">verticies_buff</span> <span class="o">=</span> <span class="n">verticies</span><span class="p">[</span><span class="n">faces_buff</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

            <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span> <span class="o">=</span> <span class="n">gxvv</span><span class="o">.</span><span class="n">vvset_from_np</span><span class="p">(</span><span class="n">verticies_buff</span><span class="p">)</span>
            <span class="n">vf1</span><span class="p">,</span> <span class="n">vf2</span><span class="p">,</span> <span class="n">vf3</span> <span class="o">=</span> <span class="n">gxvv</span><span class="o">.</span><span class="n">vvset_from_np</span><span class="p">(</span><span class="n">faces_buff</span><span class="p">)</span>
            <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">nz</span> <span class="o">=</span> <span class="n">gxvv</span><span class="o">.</span><span class="n">vvset_from_np</span><span class="p">(</span><span class="n">normals</span><span class="p">[</span><span class="n">faces_buff</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">draw_surface_3d_ex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                <span class="n">vx</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">vy</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">vz</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span>
                                                <span class="n">nx</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">ny</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">nz</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span>
                                                <span class="n">gxapi</span><span class="o">.</span><span class="n">GXVV</span><span class="o">.</span><span class="n">null</span><span class="p">(),</span> <span class="n">color</span><span class="p">,</span>
                                                <span class="n">vf1</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">vf2</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span> <span class="n">vf3</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span>
                                                <span class="n">gxipj</span><span class="p">)</span>
            <span class="n">n_faces_written</span> <span class="o">+=</span> <span class="n">n_write</span></div>


<div class="viewcode-block" id="surface_group_from_file"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.surface_group_from_file">[docs]</a><span class="k">def</span> <span class="nf">surface_group_from_file</span><span class="p">(</span><span class="n">v3d</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">group_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a 3D surface group from a surface dataset file.</span>

<span class="sd">    :param v3d:         `geosoft.gxpy.view.View_3d` instance</span>
<span class="sd">    :param file_name:   surface dataset file name (extension .geosoft_surface).</span>
<span class="sd">                        See `geosoft.gxpy.surface.SurfaceDataset`.</span>
<span class="sd">    :param group_name:  group name, default is the base file name.</span>
<span class="sd">    :param overwrite:   True to overwrite existing group</span>

<span class="sd">    .. versionadded:: 9.3.1</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">group_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">group_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
        <span class="n">group_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">group_name</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">v3d</span><span class="o">.</span><span class="n">has_group</span><span class="p">(</span><span class="n">group_name</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">overwrite</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;Cannot overwrite exing group &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">group_name</span><span class="p">))</span>

    <span class="n">v3d</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">draw_surface_3d_from_file</span><span class="p">(</span><span class="n">group_name</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="n">gxspd</span><span class="o">.</span><span class="n">extent_from_metadata_file</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
    <span class="n">v3d</span><span class="o">.</span><span class="n">add_extent</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span></div>


<div class="viewcode-block" id="contour"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.contour">[docs]</a><span class="k">def</span> <span class="nf">contour</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">grid_file_name</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a contour group from a grid file.  A default contour interval is determined from the grid.</span>

<span class="sd">    :param view:            `geosoft.gxpy.view.View` instance</span>
<span class="sd">    :param group_name:      name for the contour group</span>
<span class="sd">    :param grid_file_name:  Grid file name</span>

<span class="sd">    .. versionadded:: 9.3</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">with</span> <span class="n">Draw</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">group_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">g</span><span class="p">:</span>
        <span class="n">g</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="n">grid_file_name</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span></div>


<div class="viewcode-block" id="legend_color_bar"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.legend_color_bar">[docs]</a><span class="k">def</span> <span class="nf">legend_color_bar</span><span class="p">(</span><span class="n">view</span><span class="p">,</span>
                     <span class="n">group_name</span><span class="p">,</span>
                     <span class="n">cmap</span><span class="p">,</span>
                     <span class="n">cmap2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">bar_location</span><span class="o">=</span><span class="n">COLOR_BAR_RIGHT</span><span class="p">,</span>
                     <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">decimals</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">annotation_height</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
                     <span class="n">annotation_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">annotation_side</span><span class="o">=</span><span class="n">COLOR_BAR_ANNOTATE_RIGHT</span><span class="p">,</span>
                     <span class="n">box_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">bar_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">max_bar_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">minimum_gap</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                     <span class="n">post_end_values</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                     <span class="n">annotate_vertical</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                     <span class="n">division_line</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                     <span class="n">interval_1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">interval_2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Draw a color bar legend from :class:Color_map coloring definitions.</span>

<span class="sd">    :param view:                :class:`gxpy.view.View` instance in which to place the bar</span>
<span class="sd">    :param group_name:          name for the color_bar group, overwrites group if it exists.</span>
<span class="sd">    :param cmap:                :class:`Color_map` instance</span>
<span class="sd">    :param cmap2:               optional orthogonal blended :class:`Color_map` instance.  If making</span>
<span class="sd">                                a shaded-color legend, provide the shaded color map here.</span>
<span class="sd">    :param bar_location:        one of:</span>

<span class="sd">        ::</span>

<span class="sd">            COLOR_BAR_RIGHT = 0</span>
<span class="sd">            COLOR_BAR_LEFT = 1</span>
<span class="sd">            COLOR_BAR_BOTTOM = 2</span>
<span class="sd">            COLOR_BAR_TOP = 3</span>

<span class="sd">    :param location:            offset or (x, y) offset from `bar_location` reference point, in cm.  The default is</span>
<span class="sd">                                determined to center the bar off the location side specified.</span>
<span class="sd">    :param decimals:            annotation decimal places</span>
<span class="sd">    :param annotation_height:   annotation number height (cm)</span>
<span class="sd">    :param annotation_offset:   offset of annotations from the bar (cm)</span>
<span class="sd">    :param annotation_side:     side of the bar for annotations</span>

<span class="sd">        ::</span>

<span class="sd">            COLOR_BAR_ANNOTATE_RIGHT = 1</span>
<span class="sd">            COLOR_BAR_ANNOTATE_LEFT = -1</span>
<span class="sd">            COLOR_BAR_ANNOTATE_TOP = 1</span>
<span class="sd">            COLOR_BAR_ANNOTATE_BOTTOM = -1</span>

<span class="sd">    :param box_size:            box size, height for vertical bars, width for horizontal bars</span>
<span class="sd">    :param bar_width:           width of the color boxes, horizontal for vertical bars, vertical for horizontal bars</span>
<span class="sd">    :param max_bar_size:        maximum bar size, default is the size of the view edge</span>
<span class="sd">    :param minimum_gap:         minimum gap to between annotations.  Annotations are dropped in necessary.</span>
<span class="sd">    :param post_end_values:     post the maximum and minimum values</span>
<span class="sd">    :param annotate_vertical:   True to orient labels vertically </span>
<span class="sd">    :param division_line:       0, no division lines, 1 - line, 2 - tick</span>
<span class="sd">    :param interval_1:          Major annotation increment, default annotates everything</span>
<span class="sd">    :param interval_2:          secondary smaller annotations, reduced to 1/10, 1/5, 1/4 or 1/2 of interval_1.</span>
<span class="sd">                                Default chooses something reasonable.</span>
<span class="sd">    :param title:               bar title, use new-lines for sub-titles.  Default uses the title and unit_of_measure</span>
<span class="sd">                                from `cmap`.</span>

<span class="sd">    .. versionadded:: 9.2</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># ensure group name is unique in the view</span>
    <span class="k">while</span> <span class="n">group_name</span> <span class="ow">in</span> <span class="n">view</span><span class="o">.</span><span class="n">group_list</span><span class="p">:</span>
        <span class="n">group_name</span> <span class="o">+=</span> <span class="s1">&#39;_&#39;</span>

    <span class="c1"># default decimals</span>
    <span class="k">if</span> <span class="n">decimals</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">decimals</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">minz</span> <span class="o">=</span> <span class="n">maxz</span> <span class="o">=</span> <span class="n">cmap</span><span class="o">.</span><span class="n">color_map</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cmap</span><span class="o">.</span><span class="n">color_map</span><span class="p">:</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">z</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">z</span> <span class="o">&lt;</span> <span class="n">minz</span><span class="p">:</span>
                    <span class="n">minz</span> <span class="o">=</span> <span class="n">z</span>
                <span class="k">elif</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="n">maxz</span><span class="p">:</span>
                    <span class="n">maxz</span> <span class="o">=</span> <span class="n">z</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">maxz</span> <span class="o">-</span> <span class="n">minz</span>
        <span class="k">while</span> <span class="n">delta</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">delta</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="n">delta</span> <span class="o">*=</span> <span class="mf">10.</span>
            <span class="n">decimals</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">itr</span> <span class="o">=</span> <span class="n">cmap</span><span class="o">.</span><span class="n">gxitr</span>
    <span class="k">with</span> <span class="n">Draw</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">group_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">g</span><span class="p">:</span>

        <span class="n">v_area</span> <span class="o">=</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">extent_clip</span><span class="p">)</span>
        <span class="n">v_width</span> <span class="o">=</span> <span class="n">v_area</span><span class="o">.</span><span class="n">dimension</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">v_height</span> <span class="o">=</span> <span class="n">v_area</span><span class="o">.</span><span class="n">dimension</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">bar_location</span> <span class="o">==</span> <span class="n">COLOR_BAR_LEFT</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">bar_location</span> <span class="o">==</span> <span class="n">COLOR_BAR_RIGHT</span><span class="p">):</span>
            <span class="n">bar_orient</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">default_bar_size</span> <span class="o">=</span> <span class="n">v_height</span> <span class="o">*</span> <span class="mf">0.8</span>
            <span class="k">if</span> <span class="n">max_bar_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">max_bar_size</span> <span class="o">=</span> <span class="n">v_height</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">bar_orient</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">default_bar_size</span> <span class="o">=</span> <span class="n">v_width</span> <span class="o">*</span> <span class="mf">0.8</span>
            <span class="k">if</span> <span class="n">max_bar_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">max_bar_size</span> <span class="o">=</span> <span class="n">v_width</span> <span class="o">*</span> <span class="mf">0.8</span>

        <span class="c1"># bar cell sizing</span>
        <span class="n">def_box_size</span> <span class="o">=</span> <span class="n">default_bar_size</span> <span class="o">/</span> <span class="n">itr</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">box_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">box_size</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mf">0.4</span> <span class="o">*</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span><span class="p">,</span> <span class="n">def_box_size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">box_size</span> <span class="o">*=</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span>
        <span class="k">if</span> <span class="n">bar_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">bar_location</span> <span class="ow">in</span> <span class="p">(</span><span class="n">COLOR_BAR_LEFT</span><span class="p">,</span> <span class="n">COLOR_BAR_RIGHT</span><span class="p">):</span>
                <span class="n">bar_width</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.4</span> <span class="o">*</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span><span class="p">,</span> <span class="n">box_size</span> <span class="o">*</span> <span class="mf">2.0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bar_width</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.4</span> <span class="o">*</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span><span class="p">,</span> <span class="n">box_size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bar_width</span> <span class="o">*=</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span>
        <span class="k">if</span> <span class="n">max_bar_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">box_size</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">box_size</span><span class="p">,</span> <span class="n">max_bar_size</span> <span class="o">/</span> <span class="n">itr</span><span class="o">.</span><span class="n">get_size</span><span class="p">())</span>

        <span class="n">annotation_height</span> <span class="o">*=</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span>
        <span class="k">if</span> <span class="n">annotation_offset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">annotation_offset</span> <span class="o">=</span> <span class="n">annotation_height</span> <span class="o">*</span> <span class="mf">0.5</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">annotation_offset</span> <span class="o">*=</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span>
        <span class="n">annotation_offset</span> <span class="o">*=</span> <span class="n">annotation_side</span>
        <span class="n">minimum_gap</span> <span class="o">*=</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span>

        <span class="n">cdict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;BAR_ORIENTATION&quot;</span><span class="p">:</span> <span class="n">bar_orient</span><span class="p">,</span>
            <span class="s2">&quot;DECIMALS&quot;</span><span class="p">:</span> <span class="n">decimals</span><span class="p">,</span>
            <span class="s1">&#39;ANNOFF&#39;</span><span class="p">:</span> <span class="n">annotation_offset</span><span class="p">,</span>
            <span class="s1">&#39;BOX_SIZE&#39;</span><span class="p">:</span> <span class="n">box_size</span><span class="p">,</span>
            <span class="s1">&#39;BAR_WIDTH&#39;</span><span class="p">:</span> <span class="n">bar_width</span><span class="p">,</span>
            <span class="s1">&#39;MINIMUM_GAP&#39;</span><span class="p">:</span> <span class="n">minimum_gap</span><span class="p">,</span>
            <span class="s2">&quot;X&quot;</span><span class="p">:</span> <span class="n">v_area</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
            <span class="s2">&quot;Y&quot;</span><span class="p">:</span> <span class="n">v_area</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
            <span class="s2">&quot;POST_MAXMIN&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">post_end_values</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;LABEL_ORIENTATION&quot;</span><span class="p">:</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">annotate_vertical</span> <span class="k">else</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;DIVISION_STYLE&quot;</span><span class="p">:</span> <span class="n">division_line</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">interval_1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">interval_2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">interval_2</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">rDUMMY</span>
            <span class="k">if</span> <span class="n">interval_2</span> <span class="o">&lt;=</span> <span class="n">interval_1</span> <span class="o">/</span> <span class="mf">10.</span><span class="p">:</span>
                <span class="n">interval_2</span> <span class="o">=</span> <span class="n">interval_1</span> <span class="o">/</span> <span class="mf">10.</span>
            <span class="k">elif</span> <span class="n">interval_2</span> <span class="o">&lt;=</span> <span class="n">interval_1</span> <span class="o">/</span> <span class="mf">5.</span><span class="p">:</span>
                <span class="n">interval_2</span> <span class="o">=</span> <span class="n">interval_1</span> <span class="o">/</span> <span class="mf">5.</span>
            <span class="k">elif</span> <span class="n">interval_2</span> <span class="o">&lt;=</span> <span class="n">interval_1</span> <span class="o">/</span> <span class="mf">4.</span><span class="p">:</span>
                <span class="n">interval_2</span> <span class="o">=</span> <span class="n">interval_1</span> <span class="o">/</span> <span class="mf">4.</span>
            <span class="k">elif</span> <span class="n">interval_2</span> <span class="o">&lt;=</span> <span class="n">interval_1</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">:</span>
                <span class="n">interval_2</span> <span class="o">=</span> <span class="n">interval_1</span> <span class="o">/</span> <span class="mf">2.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">interval_2</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">rDUMMY</span>
            <span class="n">cdict</span><span class="p">[</span><span class="s2">&quot;FIXED_INTERVAL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">interval_1</span>
            <span class="n">cdict</span><span class="p">[</span><span class="s2">&quot;FIXED_MINOR_INTERVAL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">interval_2</span>

        <span class="n">g</span><span class="o">.</span><span class="n">text_def</span> <span class="o">=</span> <span class="n">Text_def</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="n">annotation_height</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cmap2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">itr2</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXITR</span><span class="o">.</span><span class="n">null</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">itr2</span> <span class="o">=</span> <span class="n">cmap2</span><span class="o">.</span><span class="n">gxitr</span>
        <span class="n">gxapi</span><span class="o">.</span><span class="n">GXMVU</span><span class="o">.</span><span class="n">color_bar_reg</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="p">,</span> <span class="n">itr</span><span class="p">,</span> <span class="n">itr2</span><span class="p">,</span> <span class="n">gxu</span><span class="o">.</span><span class="n">reg_from_dict</span><span class="p">(</span><span class="n">cdict</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">json_encode</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cmap</span><span class="o">.</span><span class="n">unit_of_measure</span><span class="p">:</span>
                <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n</span><span class="s1">(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">cmap</span><span class="o">.</span><span class="n">unit_of_measure</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">title</span> <span class="o">=</span> <span class="n">cmap</span><span class="o">.</span><span class="n">title</span>

        <span class="k">if</span> <span class="n">title</span><span class="p">:</span>

            <span class="n">title_height</span> <span class="o">=</span> <span class="n">annotation_height</span> <span class="o">*</span> <span class="mf">1.5</span>
            <span class="n">g</span><span class="o">.</span><span class="n">text_def</span> <span class="o">=</span> <span class="n">Text_def</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="n">title_height</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">FONT_WEIGHT_BOLD</span><span class="p">)</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">edge_reference</span><span class="p">(</span><span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">extent</span><span class="p">),</span> <span class="n">REF_BOTTOM_CENTER</span><span class="p">))</span>
            <span class="n">p</span> <span class="o">-=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">title_height</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="ow">in</span> <span class="n">title</span><span class="p">:</span>
                <span class="n">tline</span> <span class="o">=</span> <span class="n">title</span><span class="p">[:</span><span class="n">title</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)]</span>
                <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">[</span><span class="n">title</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tline</span> <span class="o">=</span> <span class="n">title</span>
                <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">g</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">tline</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">reference</span><span class="o">=</span><span class="n">REF_TOP_CENTER</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">text_def</span> <span class="o">=</span> <span class="n">Text_def</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="n">title_height</span> <span class="o">*</span> <span class="mf">0.8</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">FONT_WEIGHT_LIGHT</span><span class="p">)</span>
                <span class="n">p</span> <span class="o">-=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">title_height</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">)</span>
                <span class="n">g</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">reference</span><span class="o">=</span><span class="n">REF_TOP_CENTER</span><span class="p">)</span>

        <span class="c1"># locate the bar</span>
        <span class="n">default_offset</span> <span class="o">=</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span>
        <span class="k">if</span> <span class="n">location</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">)):</span>
            <span class="n">default_offset</span> <span class="o">=</span> <span class="n">location</span> <span class="o">*</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span>
            <span class="n">location</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">location</span> <span class="o">=</span> <span class="n">location</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span><span class="p">,</span> <span class="n">location</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span>

        <span class="n">area</span> <span class="o">=</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">extent_clip</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bar_location</span> <span class="o">==</span> <span class="n">COLOR_BAR_LEFT</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">default_offset</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">xy</span> <span class="o">=</span> <span class="n">edge_reference</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">REF_CENTER_LEFT</span><span class="p">)</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="n">REF_CENTER_RIGHT</span>
        <span class="k">elif</span> <span class="n">bar_location</span> <span class="o">==</span> <span class="n">COLOR_BAR_BOTTOM</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">default_offset</span><span class="p">)</span>
            <span class="n">xy</span> <span class="o">=</span> <span class="n">edge_reference</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">REF_BOTTOM_CENTER</span><span class="p">)</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="n">REF_TOP_CENTER</span>
        <span class="k">elif</span> <span class="n">bar_location</span> <span class="o">==</span> <span class="n">COLOR_BAR_TOP</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">default_offset</span><span class="p">)</span>
            <span class="n">xy</span> <span class="o">=</span> <span class="n">edge_reference</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">REF_TOP_CENTER</span><span class="p">)</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="n">REF_BOTTOM_CENTER</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># BAR_RIGHT</span>
            <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">default_offset</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">xy</span> <span class="o">=</span> <span class="n">edge_reference</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">REF_CENTER_RIGHT</span><span class="p">)</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="n">REF_CENTER_LEFT</span>

        <span class="n">location</span> <span class="o">=</span> <span class="n">xy</span> <span class="o">+</span> <span class="n">location</span>
        <span class="n">g</span><span class="o">.</span><span class="n">locate</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">reference</span><span class="p">)</span></div>
            
                
<div class="viewcode-block" id="Color"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color">[docs]</a><span class="k">class</span> <span class="nc">Color</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Colours, which are stored as a 32-bit color integer.</span>

<span class="sd">    :param color:   string descriptor (eg. &#39;R255G0B125&#39;), color letter R, G, B, C, M, Y, H, S or V.;</span>
<span class="sd">                    tuple (r, g, b), (c, m, y) or (h, s, v), each item defined in the range 0 to 255;</span>
<span class="sd">                    32-bit color number, which can be an item selected from the following list:</span>

<span class="sd">                    ::</span>

<span class="sd">                        C_BLACK</span>
<span class="sd">                        C_RED</span>
<span class="sd">                        C_GREEN</span>
<span class="sd">                        C_BLUE</span>
<span class="sd">                        C_CYAN</span>
<span class="sd">                        C_MAGENTA</span>
<span class="sd">                        C_YELLOW</span>
<span class="sd">                        C_GREY</span>
<span class="sd">                        C_LT_RED</span>
<span class="sd">                        C_LT_GREEN</span>
<span class="sd">                        C_LT_BLUE</span>
<span class="sd">                        C_LT_CYAN</span>
<span class="sd">                        C_LT_MAGENTA</span>
<span class="sd">                        C_LT_YELLOW</span>
<span class="sd">                        C_LT_GREY</span>
<span class="sd">                        C_GREY10</span>
<span class="sd">                        C_GREY25</span>
<span class="sd">                        C_GREY50</span>
<span class="sd">                        C_WHITE</span>
<span class="sd">                        C_TRANSPARENT</span>

<span class="sd">    :param model:   model of the tuple: </span>
<span class="sd">    </span>
<span class="sd">                    ::</span>
<span class="sd">                    </span>
<span class="sd">                        CMODEL_RGB (default)</span>
<span class="sd">                        CMODEL_CMY</span>
<span class="sd">                        CMODEL_HSV</span>

<span class="sd">    .. versionadded:: 9.2</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Color.__init__"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">CMODEL_RGB</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">Color</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="n">color</span><span class="o">.</span><span class="n">int_value</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">int_value</span> <span class="o">=</span> <span class="n">color</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXMVIEW</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">model</span> <span class="o">==</span> <span class="n">CMODEL_CMY</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cmy</span> <span class="o">=</span> <span class="n">color</span>

            <span class="k">elif</span> <span class="n">model</span> <span class="o">==</span> <span class="n">CMODEL_HSV</span><span class="p">:</span>
                <span class="n">hue</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="n">sat</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">val</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="n">color</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXMVIEW</span><span class="o">.</span><span class="n">color_hsv</span><span class="p">(</span><span class="n">hue</span><span class="p">,</span> <span class="n">sat</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">color</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">int_value</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">int_value</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">int_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; color as a 32-bit color integer, can be set&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_color</span>

    <span class="nd">@int_value</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">int_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">color</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;Invalid color integer </span><span class="si">{}</span><span class="s1">, must be &gt;= 0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">color</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;color as an (red, green, brue) tuple, can be set&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">int_value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">int_ref</span><span class="p">()</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">int_ref</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">int_ref</span><span class="p">()</span>
        <span class="n">gxapi</span><span class="o">.</span><span class="n">GXMVIEW</span><span class="o">.</span><span class="n">color2_rgb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_color</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">value</span>

    <span class="nd">@rgb</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rgb</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="n">rgb</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="n">rgb</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="n">rgb</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXMVIEW</span><span class="o">.</span><span class="n">color_rgb</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cmy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;color as an (cyan, magenta, yellow) tuple, can be set&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">int_value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rgb</span>
        <span class="k">return</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">red</span><span class="p">,</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">green</span><span class="p">,</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">blue</span>

    <span class="nd">@cmy</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">cmy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmy</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span> <span class="o">-</span> <span class="n">cmy</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">cmy</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">cmy</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

<div class="viewcode-block" id="Color.adjust_brightness"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color.adjust_brightness">[docs]</a>    <span class="k">def</span> <span class="nf">adjust_brightness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">brightness</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a :class:`Color` instance adjusted for brightness.</span>
<span class="sd">        </span>
<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">brightness</span> <span class="o">==</span> <span class="mf">0.</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>

        <span class="n">c</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rgb</span>
        <span class="k">if</span> <span class="n">brightness</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">brightness</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span>
            <span class="n">c</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">c</span> <span class="o">-</span> <span class="n">w</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">m</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">m</span> <span class="o">-</span> <span class="n">w</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">w</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Color</span><span class="p">((</span><span class="n">c</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">model</span><span class="o">=</span><span class="n">CMODEL_CMY</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">k</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="o">-</span><span class="n">brightness</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span>
            <span class="n">c</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">c</span> <span class="o">+</span> <span class="n">k</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
            <span class="n">m</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="n">k</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="n">k</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Color</span><span class="p">((</span><span class="n">c</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">model</span><span class="o">=</span><span class="n">CMODEL_CMY</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="font_weight_from_line_thickness"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.font_weight_from_line_thickness">[docs]</a><span class="k">def</span> <span class="nf">font_weight_from_line_thickness</span><span class="p">(</span><span class="n">line_thick</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns font weight for a text height and line thickness.</span>

<span class="sd">    :param line_thick:  line thickness in same units as the text height</span>
<span class="sd">    :param height:      text height</span>

<span class="sd">    :returns: one of:</span>

<span class="sd">            ::</span>

<span class="sd">                FONT_WEIGHT_ULTRALIGHT</span>
<span class="sd">                FONT_WEIGHT_LIGHT</span>
<span class="sd">                FONT_WEIGHT_MEDIUM</span>
<span class="sd">                FONT_WEIGHT_BOLD</span>
<span class="sd">                FONT_WEIGHT_XBOLD</span>
<span class="sd">                FONT_WEIGHT_XXBOLD</span>

<span class="sd">    .. versionadded:: 9.2</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">height</span> <span class="o">&lt;=</span> <span class="mf">0.</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">FONT_WEIGHT_ULTRALIGHT</span>
    <span class="n">ratio</span> <span class="o">=</span> <span class="n">line_thick</span> <span class="o">/</span> <span class="n">height</span>
    <span class="n">fw</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">_weight_factor</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ratio</span> <span class="o">&lt;=</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">fw</span>
        <span class="n">fw</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">FONT_WEIGHT_MEDIUM</span></div>


<div class="viewcode-block" id="thickness_from_font_weight"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.thickness_from_font_weight">[docs]</a><span class="k">def</span> <span class="nf">thickness_from_font_weight</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">    Returns the line thickness appropriate for a text weight.</span>

<span class="sd">    :param weight: one of:</span>

<span class="sd">            ::</span>

<span class="sd">                FONT_WEIGHT_ULTRALIGHT</span>
<span class="sd">                FONT_WEIGHT_LIGHT</span>
<span class="sd">                FONT_WEIGHT_MEDIUM</span>
<span class="sd">                FONT_WEIGHT_BOLD</span>
<span class="sd">                FONT_WEIGHT_XBOLD</span>
<span class="sd">                FONT_WEIGHT_XXBOLD</span>

<span class="sd">    :param height:  font height</span>

<span class="sd">    .. versionadded:: 9.2</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">height</span> <span class="o">*</span> <span class="n">_weight_factor</span><span class="p">[</span><span class="n">weight</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span></div>


<div class="viewcode-block" id="Text_def"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Text_def">[docs]</a><span class="k">class</span> <span class="nc">Text_def</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Text definition:</span>

<span class="sd">    :param font:        font name.  TrueType fonts are assumed unless the name ends with &#39;.gfn&#39;,</span>
<span class="sd">                        which is a Geosoft gfn font.</span>
<span class="sd">    :param weight:      one of:</span>

<span class="sd">                        ::</span>

<span class="sd">                            FONT_WEIGHT_ULTRALIGHT</span>
<span class="sd">                            FONT_WEIGHT_LIGHT</span>
<span class="sd">                            FONT_WEIGHT_MEDIUM</span>
<span class="sd">                            FONT_WEIGHT_BOLD</span>
<span class="sd">                            FONT_WEIGHT_XBOLD</span>
<span class="sd">                            FONT_WEIGHT_XXBOLD</span>

<span class="sd">    :param line_thick:  line thickness from which to determine a weight, which is calculated from the </span>
<span class="sd">                        ratio of line thickness to height.</span>
<span class="sd">    :param italics:     True for italics fonts</span>
<span class="sd">    :param height:      text height, default 0.25</span>
<span class="sd">    :param factor:      default spatial properties are multiplied by this factor.  This is useful</span>
<span class="sd">                        for creating text scaled to the units of a view.  The default text properties</span>
<span class="sd">                        are scaled to cm.</span>

<span class="sd">    :Properties:</span>

<span class="sd">        :height:        font height in view units</span>
<span class="sd">        :font:          font name</span>
<span class="sd">        :weight:        font weight, one of FONT_WEIGHT</span>
<span class="sd">        :line_thick:    font line thickness for gfn stroke fonts</span>
<span class="sd">        :italics:       True for italics</span>
<span class="sd">        :slant:         Slant angle for stroke fonts, 0 if normal, 15 for italics</span>
<span class="sd">        :mapplot_string:  mapplot compatible text definition string</span>

<span class="sd">    .. versionadded:: 9.2</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Text_def.__init__"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Text_def.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_font</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_height</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gfn</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_weight</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_italics</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">def_pen</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">def_pen</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">C_BLACK</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mf">0.25</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="s1">&#39;DEFAULT&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gfn</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">italics</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">factor</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;factor&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">factor</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">*=</span> <span class="n">factor</span>

        <span class="n">line_thick</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;line_thick&#39;</span><span class="p">:</span>
                <span class="n">line_thick</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;font&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;Invalid text definition parameter (</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">)))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">line_thick</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">FONT_WEIGHT_MEDIUM</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">font_weight_from_line_thickness</span><span class="p">(</span><span class="n">line_thick</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;text color as a :class:`Color` instance, can be set&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_color</span>

    <span class="nd">@color</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">Color</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">font</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;text font name, can be set.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_font</span>

    <span class="nd">@font</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">font</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">font</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;.gfn&#39;</span> <span class="ow">in</span> <span class="n">font</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gfn</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_font</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.gfn&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gfn</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_font</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;(TT)&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_font</span> <span class="o">=</span> <span class="s1">&#39;DEFAULT&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gfn</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">line_thick</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;text line thickness determined from the font weight, can be set.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">thickness_from_font_weight</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

    <span class="nd">@line_thick</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">line_thick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line_thick</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">font_weight_from_line_thickness</span><span class="p">(</span><span class="n">line_thick</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">slant</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;text slant, 15 for italics, 0 for not italics, can be set.  If set, any slant</span>
<span class="sd">           greater than 5 will result in a 15 degree slant to create italics.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">italics</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">15</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>

    <span class="nd">@slant</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">slant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slant</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">slant</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">italics</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">italics</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mapplot_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mapplot text definition string, assumes scaling in cm.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_font</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">font</span> <span class="o">=</span> <span class="s1">&#39;DEFAULT&#39;</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gfn</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_font</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;(TT)&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_font</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">,,,</span><span class="si">{}</span><span class="s1">,&quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">slant</span><span class="p">,</span> <span class="n">font</span><span class="p">)</span></div>


<div class="viewcode-block" id="Pen"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Pen">[docs]</a><span class="k">class</span> <span class="nc">Pen</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Geosoft Pen class.  </span>
<span class="sd">    </span>
<span class="sd">    The default dimensioned properties (`line_thick`, `line_pitch`,</span>
<span class="sd">    `pat_size` and `pat_thick`) assume the view units are cm, and this is usually</span>
<span class="sd">    only the case for the base view.  For views in other units either</span>
<span class="sd">    explicitly define the dimention in view units, or pass `factor` set </span>
<span class="sd">    the the view :attr:`geosoft.gxpy.view.View.units_per_map_cm`.</span>

<span class="sd">    :param line_color:  line :class:`Color` instance, default is black</span>
<span class="sd">    :param fill_color:  fill :class:`Color` instance, default is transparent</span>
<span class="sd">    :param line_thick:  line thickness, default is 0.01</span>
<span class="sd">    :param line_style:  line pattern style</span>

<span class="sd">                        ::</span>

<span class="sd">                            LINE_STYLE_SOLID (default)</span>
<span class="sd">                            LINE_STYLE_LONG</span>
<span class="sd">                            LINE_STYLE_DOTTED</span>
<span class="sd">                            LINE_STYLE_SHORT</span>
<span class="sd">                            LINE_STYLE_LONG_SHORT_LONG</span>
<span class="sd">                            LINE_STYLE_LONG_DOT_LONG</span>

<span class="sd">    :param line_pitch:  line style pitch, default is 0.5</span>
<span class="sd">    :param line_smooth: smooth line:</span>

<span class="sd">                        ::</span>

<span class="sd">                            SMOOTH_NONE (default)</span>
<span class="sd">                            SMOOTH_AKIMA</span>
<span class="sd">                            SMOOTH_CUBIC</span>

<span class="sd">    :param pat_number:  pattern number for filled patterns (refer to `etc/default.pat`) default 0, flood fill</span>
<span class="sd">    :param pat_angle:   pattern angle, default 0</span>
<span class="sd">    :param pat_density: pattern density, default 1</span>
<span class="sd">    :param pat_size:    pattern size, default 1.0</span>
<span class="sd">    :param pat_style:   pattern style:</span>

<span class="sd">                        ::</span>

<span class="sd">                            TILE_RECTANGULAR (default)</span>
<span class="sd">                            TILE_DIAGONAL</span>
<span class="sd">                            TILE_TRIANGULAR</span>
<span class="sd">                            TILE_RANDOM</span>

<span class="sd">    :param pat_thick:   pattern line thickness, default 0.01</span>
<span class="sd">    :param default:     default :class:`Pen` instance, if specified defaults are established from this</span>
<span class="sd">    :param factor:      default spatial properties are multiplied by this factor.  This is useful</span>
<span class="sd">                        for creating pens scaled to the units of a view.  The default pen properties</span>
<span class="sd">                        are scaled to cm.  Typically you will pass :attr:`geosoft.gxpy.view.View.units_per_map_cm`.</span>

<span class="sd">    .. versionadded: 9.2</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Pen.__init__"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Pen.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_line_color</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_line_thick</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_line_style</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_line_pitch</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_line_smooth</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fill_color</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pat_number</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pat_angle</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pat_density</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pat_size</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pat_style</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pat_thick</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">def_pen</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">def_pen</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">C_BLACK</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_thick</span> <span class="o">=</span> <span class="mf">0.01</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_style</span> <span class="o">=</span> <span class="n">LINE_STYLE_SOLID</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_pitch</span> <span class="o">=</span> <span class="mf">0.5</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_smooth</span> <span class="o">=</span> <span class="n">SMOOTH_NONE</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fill_color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">C_TRANSPARENT</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pat_number</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pat_angle</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pat_density</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pat_size</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pat_style</span> <span class="o">=</span> <span class="n">TILE_RECTANGULAR</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pat_thick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_thick</span>

        <span class="n">factor</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;factor&#39;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">factor</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_thick</span> <span class="o">*=</span> <span class="n">factor</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_pitch</span> <span class="o">*=</span> <span class="n">factor</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pat_size</span> <span class="o">*=</span> <span class="n">factor</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pat_thick</span> <span class="o">*=</span> <span class="n">factor</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;line_color&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">line_color</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;fill_color&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fill_color</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;Invalid pen parameter (</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Pen.from_mapplot_string"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Pen.from_mapplot_string">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_mapplot_string</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">cstr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a :class:`Pen` instance from a mapplot-style string descriptor using either a</span>
<span class="sd">        krgbKRGB or kcmyKCMY color model.  Lower case letters indicate line color, uppercase</span>
<span class="sd">        indicates fill color, &#39;k&#39;, &#39;K&#39; for black.  Each letter may be followed by an intensity</span>
<span class="sd">        between 0 and 255.  If an intensity is not specified 255 is assumed.</span>

<span class="sd">        Line thickness can be defined by &#39;t&#39; followed by a thickness in 1000&#39;th of the view unit,</span>
<span class="sd">        which for the default &#39;base&#39; view would be microns.</span>

<span class="sd">        :param cstr:    mapplot-style color definition</span>
<span class="sd">                      </span>
<span class="sd">        Examples:</span>
<span class="sd">        </span>
<span class="sd">            =========== ==============================================</span>
<span class="sd">            &#39;r&#39;         red line</span>
<span class="sd">            &#39;R&#39;         red fill</span>
<span class="sd">            &#39;rG64&#39;      red line, light-green fill</span>
<span class="sd">            &#39;c64&#39;       light cyan line, equivalent to &#39;R191G255B255&#39;</span>
<span class="sd">            &#39;c64K96&#39;    light cyan line, light-grey fill</span>
<span class="sd">            &#39;bt500&#39;     blue line, 0.5 units thick</span>
<span class="sd">            =========== ==============================================</span>
<span class="sd">            </span>
<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">color_model</span><span class="p">(</span><span class="n">colstr</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">colstr</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="s1">&#39;cmy&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;cmyk&#39;</span>
            <span class="k">return</span> <span class="s1">&#39;rgbk&#39;</span>

        <span class="k">def</span> <span class="nf">get_part</span><span class="p">(</span><span class="n">colstr</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">255</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">colstr</span><span class="p">:</span>
                <span class="k">return</span> <span class="mi">0</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">colstr</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">colstr</span><span class="p">[</span><span class="n">end</span><span class="p">:]:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">c</span> <span class="ow">in</span> <span class="s1">&#39;0123456789&#39;</span><span class="p">):</span>
                    <span class="k">break</span>
                <span class="n">end</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">end</span> <span class="o">==</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">default</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">colstr</span><span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span><span class="n">end</span><span class="p">])</span>

        <span class="k">def</span> <span class="nf">add_k</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">has_color</span><span class="p">(</span><span class="n">colstr</span><span class="p">,</span> <span class="n">cc</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cc</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">colstr</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="n">colstr</span><span class="p">,</span> <span class="n">cc</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">has_color</span><span class="p">(</span><span class="n">colstr</span><span class="p">,</span> <span class="n">cc</span><span class="p">):</span>
                <span class="n">k</span> <span class="o">=</span> <span class="n">get_part</span><span class="p">(</span><span class="n">colstr</span><span class="p">,</span> <span class="n">cc</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">has_color</span><span class="p">(</span><span class="n">colstr</span><span class="p">,</span> <span class="n">cc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]):</span>
                    <span class="k">if</span> <span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;c&#39;</span> <span class="ow">or</span> <span class="n">model</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">add_k</span><span class="p">((</span><span class="mi">255</span> <span class="o">-</span> <span class="n">get_part</span><span class="p">(</span><span class="n">colstr</span><span class="p">,</span> <span class="n">cc</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                                      <span class="mi">255</span> <span class="o">-</span> <span class="n">get_part</span><span class="p">(</span><span class="n">colstr</span><span class="p">,</span> <span class="n">cc</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                                      <span class="mi">255</span> <span class="o">-</span> <span class="n">get_part</span><span class="p">(</span><span class="n">colstr</span><span class="p">,</span> <span class="n">cc</span><span class="p">[</span><span class="mi">2</span><span class="p">])),</span>
                                     <span class="n">k</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">add_k</span><span class="p">((</span><span class="n">get_part</span><span class="p">(</span><span class="n">colstr</span><span class="p">,</span> <span class="n">cc</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                                      <span class="n">get_part</span><span class="p">(</span><span class="n">colstr</span><span class="p">,</span> <span class="n">cc</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                                      <span class="n">get_part</span><span class="p">(</span><span class="n">colstr</span><span class="p">,</span> <span class="n">cc</span><span class="p">[</span><span class="mi">2</span><span class="p">])),</span>
                                     <span class="n">k</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">add_k</span><span class="p">((</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">k</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">C_TRANSPARENT</span>

        <span class="n">model</span> <span class="o">=</span> <span class="n">color_model</span><span class="p">(</span><span class="n">cstr</span><span class="p">)</span>
        <span class="n">line_color</span> <span class="o">=</span> <span class="n">color</span><span class="p">(</span><span class="n">cstr</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
        <span class="n">fill_color</span> <span class="o">=</span> <span class="n">color</span><span class="p">(</span><span class="n">cstr</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
        <span class="n">line_thick</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">get_part</span><span class="p">(</span><span class="n">cstr</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="mf">0.001</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">line_color</span><span class="o">=</span><span class="n">line_color</span><span class="p">,</span> <span class="n">fill_color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span> <span class="n">line_thick</span><span class="o">=</span><span class="n">line_thick</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">!=</span> <span class="n">v</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">line_color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;pen line color as a :class:`color` instance, can be set.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_color</span>

    <span class="nd">@line_color</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">line_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">Color</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_line_color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_line_color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fill_color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fill_color</span>

    <span class="nd">@fill_color</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">fill_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;pen fill color as a :class:`color` instance, can be set.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">Color</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fill_color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fill_color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mapplot_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;line/fill colour and thickness string suing mapplor format, eg. &#39;kR125B64t1000&#39;&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_color</span><span class="o">.</span><span class="n">int_value</span> <span class="o">!=</span> <span class="n">C_TRANSPARENT</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_color</span><span class="o">.</span><span class="n">int_value</span> <span class="o">==</span> <span class="n">C_BLACK</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;k&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_color</span><span class="o">.</span><span class="n">rgb</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;r</span><span class="si">{}</span><span class="s1">g</span><span class="si">{}</span><span class="s1">b</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fill_color</span><span class="o">.</span><span class="n">int_value</span> <span class="o">!=</span> <span class="n">C_TRANSPARENT</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_color</span><span class="o">.</span><span class="n">int_value</span> <span class="o">==</span> <span class="n">C_BLACK</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;K&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fill_color</span><span class="o">.</span><span class="n">rgb</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;R</span><span class="si">{}</span><span class="s1">G</span><span class="si">{}</span><span class="s1">B</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">s</span> <span class="o">+</span> <span class="s1">&#39;t</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_thick</span> <span class="o">*</span> <span class="mf">1000.</span><span class="p">))</span></div>


<div class="viewcode-block" id="Color_symbols_group"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_symbols_group">[docs]</a><span class="k">class</span> <span class="nc">Color_symbols_group</span><span class="p">(</span><span class="n">Group</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Data represented as colored symbols based on a :class:`Color_map`.</span>

<span class="sd">    :Constructors:</span>

<span class="sd">        ============ =======================================</span>
<span class="sd">        :func:`new`  create a new symbol group in a view</span>
<span class="sd">        :func:`open` open an existing symbol group in a view</span>
<span class="sd">        ============ =======================================</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__del__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_gxcsymb&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_gxcsymb</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_close&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">()</span>

<div class="viewcode-block" id="Color_symbols_group.__init__"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_symbols_group.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_gxcsymb</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color_symbols_group.new"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_symbols_group.new">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">new</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span>
            <span class="n">view</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">color_map</span><span class="p">,</span>
            <span class="n">symbol_def</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">symbol</span><span class="o">=</span><span class="n">SYMBOL_CIRCLE</span><span class="p">,</span>
            <span class="n">mode</span><span class="o">=</span><span class="n">REPLACE</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new color symbols group with color mapping. If the group exists a new unique name is</span>
<span class="sd">        constructed.</span>

<span class="sd">        :param view:            the view in which to place the group</span>
<span class="sd">        :param name:            group name</span>
<span class="sd">        :param data:            2d numpy data array [[x, y, value], ...] or an iterable that yields</span>
<span class="sd">                                `((x, y), value)`, or `((x, y, z), value, ...)`.  Only the  first `value` is used,</span>
<span class="sd">                                an in the case of an iterable that yields (x, y, z) the z is ignored.</span>
<span class="sd">        :param color_map:       symbol fill color :class:`Color_map`.</span>
<span class="sd">                                Symbols are filled with the color lookup using `data`.</span>
<span class="sd">        :param symbol_def:      :class:`Text_def` defines the symbol font to use, normally</span>
<span class="sd">                                `symbols.gfn` is expected, and if used the symbols defined by the `SYMBOL` manifest</span>
<span class="sd">                                are valid.  For other fonts you will get the symbol requested.  The default is</span>
<span class="sd">                                `Text_def(font=&#39;symbols.gfn&#39;, color=&#39;k&#39;, weight=FONT_WEIGHT_ULTRALIGHT)`</span>
<span class="sd">        :param symbol:          the symbol to plot, normally one of `SYMBOL`.</span>
<span class="sd">        :param mode:            REPLACE (default) or NEW, which creates a new unique name if group exists</span>
<span class="sd">        :return:                :class:`Color_symbols_group` instance</span>

<span class="sd">        .. versionadded:: 9.2</span>

<span class="sd">        .. versionchanged:: 9.4 added support for passing data as a 2d numpy array</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">valid</span><span class="p">(</span><span class="n">xyd</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">xyd</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">xyd</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">xyd</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="n">cs</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">cs</span><span class="o">.</span><span class="n">_gxcsymb</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXCSYMB</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">color_map</span><span class="o">.</span><span class="n">save_file</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">symbol_def</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">symbol_def</span> <span class="o">=</span> <span class="n">Text_def</span><span class="p">(</span><span class="n">font</span><span class="o">=</span><span class="s1">&#39;geosoft.gfn&#39;</span><span class="p">,</span>
                                  <span class="n">height</span><span class="o">=</span><span class="p">(</span><span class="mf">0.25</span> <span class="o">*</span> <span class="n">view</span><span class="o">.</span><span class="n">units_per_map_cm</span><span class="p">),</span>
                                  <span class="n">weight</span><span class="o">=</span><span class="n">FONT_WEIGHT_ULTRALIGHT</span><span class="p">,</span>
                                  <span class="n">color</span><span class="o">=</span><span class="n">C_BLACK</span><span class="p">)</span>
        <span class="n">cs</span><span class="o">.</span><span class="n">_gxcsymb</span><span class="o">.</span><span class="n">set_font</span><span class="p">(</span><span class="n">symbol_def</span><span class="o">.</span><span class="n">font</span><span class="p">,</span> <span class="n">symbol_def</span><span class="o">.</span><span class="n">gfn</span><span class="p">,</span> <span class="n">symbol_def</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span> <span class="n">symbol_def</span><span class="o">.</span><span class="n">italics</span><span class="p">)</span>
        <span class="n">cs</span><span class="o">.</span><span class="n">_gxcsymb</span><span class="o">.</span><span class="n">set_static_col</span><span class="p">(</span><span class="n">symbol_def</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">int_value</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">cs</span><span class="o">.</span><span class="n">_gxcsymb</span><span class="o">.</span><span class="n">set_scale</span><span class="p">(</span><span class="n">symbol_def</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
        <span class="n">cs</span><span class="o">.</span><span class="n">_gxcsymb</span><span class="o">.</span><span class="n">set_number</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;data array must have shape (-1, 3)&#39;</span><span class="p">))</span>
            <span class="n">cs</span><span class="o">.</span><span class="n">_gxcsymb</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">(</span><span class="n">data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span>
                                 <span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">(</span><span class="n">data</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span>
                                 <span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">(</span><span class="n">data</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">gxvv</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xy</span> <span class="o">=</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">PPoint</span><span class="p">([</span><span class="n">xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">xy</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">if</span> <span class="n">valid</span><span class="p">(</span><span class="n">xy</span><span class="p">)])</span>
            <span class="n">cs</span><span class="o">.</span><span class="n">_gxcsymb</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">(</span><span class="n">xy</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span>
                                 <span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">(</span><span class="n">xy</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">gxvv</span><span class="p">,</span>
                                 <span class="n">gxvv</span><span class="o">.</span><span class="n">GXvv</span><span class="p">([</span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">if</span> <span class="n">valid</span><span class="p">(</span><span class="n">d</span><span class="p">)])</span><span class="o">.</span><span class="n">gxvv</span><span class="p">)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">col_symbol</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">cs</span><span class="o">.</span><span class="n">_gxcsymb</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cs</span><span class="o">.</span><span class="n">unit_of_measure</span><span class="p">:</span>
            <span class="n">color_map</span><span class="o">.</span><span class="n">unit_of_measure</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">unit_of_measure</span>

        <span class="k">return</span> <span class="n">cs</span></div>

<div class="viewcode-block" id="Color_symbols_group.open"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_symbols_group.open">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span>
             <span class="n">view</span><span class="p">,</span>
             <span class="n">group_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open an existing color symbols group.</span>

<span class="sd">        :param view:        view that contains the group</span>
<span class="sd">        :param group_name:  name of the group, which must be a color symbols group</span>
<span class="sd">        :return:            :class:`Color_symbols_group` instance</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cs</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">READ_ONLY</span><span class="p">)</span>
        <span class="n">group_number</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">find_group</span><span class="p">(</span><span class="n">group_name</span><span class="p">)</span>
        <span class="n">cs</span><span class="o">.</span><span class="n">_gxcsymb</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">get_col_symbol</span><span class="p">(</span><span class="n">group_number</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cs</span></div>

<div class="viewcode-block" id="Color_symbols_group.color_map"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_symbols_group.color_map">[docs]</a>    <span class="k">def</span> <span class="nf">color_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the :class:`geosoft.gxpy.group.Color_map` of a color symbol group.</span>

<span class="sd">        .. versionadded:: 9.3</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">itr</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXITR</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gxcsymb</span><span class="o">.</span><span class="n">get_itr</span><span class="p">(</span><span class="n">itr</span><span class="p">)</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="n">geosoft</span><span class="o">.</span><span class="n">gxpy</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">Color_map</span><span class="p">(</span><span class="n">itr</span><span class="p">)</span>
        <span class="n">cmap</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="n">cmap</span><span class="o">.</span><span class="n">unit_of_measure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit_of_measure</span>

        <span class="k">return</span> <span class="n">cmap</span></div></div>


<div class="viewcode-block" id="Aggregate_group"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Aggregate_group">[docs]</a><span class="k">class</span> <span class="nc">Aggregate_group</span><span class="p">(</span><span class="n">Group</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Aggregate group in a view</span>
<span class="sd">    </span>
<span class="sd">    :Constructors:</span>

<span class="sd">        ======== ================================</span>
<span class="sd">        `open()` open an existing aggregate group</span>
<span class="sd">        `new()`  create a new aggregate group</span>
<span class="sd">        ======== ================================</span>

<span class="sd">    :Properties:</span>
<span class="sd">    </span>
<span class="sd">        :name:  aggregate group name</span>
<span class="sd">        :agg:   :class:`gxpy.agg.Aggregate_image` instance</span>
<span class="sd">    </span>
<span class="sd">    .. versionadded:: 9.2</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__del__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;agg&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">agg</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_close&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">()</span>

<div class="viewcode-block" id="Aggregate_group.__init__"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Aggregate_group.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">agg</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Aggregate_group.new"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Aggregate_group.new">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">new</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">agg</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">REPLACE</span><span class="p">,</span> <span class="n">clip</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new aggregate group in a view.</span>

<span class="sd">        :param view:    `geosoft.gxpy.view.View` or `geosoft.gxpy.view.View_3d` instance</span>
<span class="sd">        :param agg:     `geosoft.gxpy.agg.Aggregate` instance.</span>
<span class="sd">        :param name:    group name, default is the aggregate name</span>
<span class="sd">        :param mode:    REPLACE (default) or NEW, which creates a unique name if the group exists</span>
<span class="sd">        :param clip:    True to clip the agregare to the view clip limits</span>

<span class="sd">        .. versionadded:: 9.2</span>

<span class="sd">        .. versionchanged:: 9.3.1 added clip mode</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">agg</span><span class="o">.</span><span class="n">name</span>
        <span class="n">agg_group</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
        <span class="n">agg_group</span><span class="o">.</span><span class="n">agg</span> <span class="o">=</span> <span class="n">agg</span>
        <span class="n">view</span><span class="o">.</span><span class="n">clip</span> <span class="o">=</span> <span class="n">clip</span>
        <span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">agg</span><span class="o">.</span><span class="n">gxagg</span><span class="p">,</span> <span class="n">agg_group</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">clip</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">agg_group</span></div>

<div class="viewcode-block" id="Aggregate_group.open"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Aggregate_group.open">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span>
             <span class="n">view</span><span class="p">,</span>
             <span class="n">group_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open an existing aggregate group in a view.</span>

<span class="sd">        :param view:        `geosoft.gxpy.view.View` or `geosoft.gxpy.view.View_3d` instance</span>
<span class="sd">        :param group_name:  group name (or number)</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">agg_group</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">READ_ONLY</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">group_name</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">group_number</span> <span class="o">=</span> <span class="n">group_name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">group_number</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">find_group</span><span class="p">(</span><span class="n">agg_group</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">agg_group</span><span class="o">.</span><span class="n">agg</span> <span class="o">=</span> <span class="n">gxagg</span><span class="o">.</span><span class="n">Aggregate_image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">get_aggregate</span><span class="p">(</span><span class="n">group_number</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">agg_group</span></div></div>


<div class="viewcode-block" id="VoxDisplayGroup"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.VoxDisplayGroup">[docs]</a><span class="k">class</span> <span class="nc">VoxDisplayGroup</span><span class="p">(</span><span class="n">Group</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Vox display group in a view.  Use class methods `new()` and `open()`</span>
<span class="sd">    to create instances of `VoxDisplayGroup`.</span>

<span class="sd">    :Constructors:</span>

<span class="sd">        ======== ==================================</span>
<span class="sd">        `open()` open an existing vox_display group</span>
<span class="sd">        `new()`  create a new vox_display group</span>
<span class="sd">        ======== ==================================</span>

<span class="sd">   .. versionadded:: 9.3.1</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__del__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_voxd&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_voxd</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_close&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">()</span>

<div class="viewcode-block" id="VoxDisplayGroup.__init__"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.VoxDisplayGroup.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view3d</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">REPLACE</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_voxd</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">view3d</span><span class="o">.</span><span class="n">is_3d</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;View must be 3d&#39;</span><span class="p">))</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">view3d</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="VoxDisplayGroup.new"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.VoxDisplayGroup.new">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">new</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">view3d</span><span class="p">,</span> <span class="n">voxd</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">REPLACE</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a VoxDisplay as a new group in the view</span>

<span class="sd">        :param view3d:  `geosoft.gxpy.view.View_3d` instance</span>
<span class="sd">        :param voxd:    `geosoft.gxpy.vox_display.VoxDisplay` instance</span>
<span class="sd">        :param name:    group name, default is the voxd name</span>
<span class="sd">        :param mode:    REPLACE (default) or NEW, which creates a unique name if the group exists</span>

<span class="sd">        .. versionadded:: 9.3.1</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">voxd</span><span class="o">.</span><span class="n">name</span>
        <span class="n">voxd_group</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">view3d</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">voxd</span><span class="o">.</span><span class="n">vox</span><span class="o">.</span><span class="n">extent</span>
        <span class="k">if</span> <span class="n">voxd</span><span class="o">.</span><span class="n">is_vector</span><span class="p">:</span>
            <span class="n">scale</span><span class="p">,</span> <span class="n">height_base_ratio</span><span class="p">,</span> <span class="n">max_base_size_ratio</span><span class="p">,</span> <span class="n">max_cones</span> <span class="o">=</span> <span class="n">voxd</span><span class="o">.</span><span class="n">vector_cone_specs</span>
            <span class="k">if</span> <span class="n">max_cones</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">max_cones</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">iDUMMY</span>
            <span class="n">minimum_value</span> <span class="o">=</span> <span class="n">voxd</span><span class="o">.</span><span class="n">shell_limits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">minimum_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">minimum_value</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="n">view3d</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">draw_vector_voxel_vectors</span><span class="p">(</span><span class="n">voxd</span><span class="o">.</span><span class="n">vox</span><span class="o">.</span><span class="n">gxvox</span><span class="p">,</span>
                                                    <span class="n">name</span><span class="p">,</span>
                                                    <span class="n">voxd</span><span class="o">.</span><span class="n">color_map</span><span class="o">.</span><span class="n">gxitr</span><span class="p">,</span>
                                                    <span class="n">scale</span><span class="p">,</span>
                                                    <span class="n">height_base_ratio</span><span class="p">,</span>
                                                    <span class="n">max_base_size_ratio</span><span class="p">,</span>
                                                    <span class="n">minimum_value</span><span class="p">,</span>
                                                    <span class="n">max_cones</span><span class="p">)</span>

            <span class="c1"># add to extent to make room for vectors</span>
            <span class="n">cell2</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">voxd</span><span class="o">.</span><span class="n">vox</span><span class="o">.</span><span class="n">cells_x</span><span class="p">),</span>
                        <span class="nb">min</span><span class="p">(</span><span class="n">voxd</span><span class="o">.</span><span class="n">vox</span><span class="o">.</span><span class="n">cells_y</span><span class="p">),</span>
                        <span class="nb">min</span><span class="p">(</span><span class="n">voxd</span><span class="o">.</span><span class="n">vox</span><span class="o">.</span><span class="n">cells_z</span><span class="p">))</span> <span class="o">*</span> <span class="mf">4.</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">gxgm</span><span class="o">.</span><span class="n">Point2</span><span class="p">((</span><span class="n">ext</span><span class="o">.</span><span class="n">p0</span> <span class="o">-</span> <span class="n">cell2</span><span class="p">,</span> <span class="n">ext</span><span class="o">.</span><span class="n">p1</span> <span class="o">+</span> <span class="n">cell2</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">view3d</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">voxd</span><span class="p">(</span><span class="n">voxd</span><span class="o">.</span><span class="n">gxvoxd</span><span class="p">,</span> <span class="n">voxd_group</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">view3d</span><span class="o">.</span><span class="n">add_extent</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>
        <span class="n">voxd_group</span><span class="o">.</span><span class="n">_voxd</span> <span class="o">=</span> <span class="n">voxd</span>
        <span class="n">voxd_group</span><span class="o">.</span><span class="n">unit_of_measure</span> <span class="o">=</span> <span class="n">voxd</span><span class="o">.</span><span class="n">unit_of_measure</span>

        <span class="k">return</span> <span class="n">voxd_group</span></div>

<div class="viewcode-block" id="VoxDisplayGroup.open"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.VoxDisplayGroup.open">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span>
             <span class="n">view</span><span class="p">,</span>
             <span class="n">group_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open an existing `VoxDisplayGroup` in a 3d view.</span>

<span class="sd">        :param view:        the 3d view</span>
<span class="sd">        :param group_name:  the name of the group to open, must be a `gxapi.GXVOXD` or</span>
<span class="sd">                            `gxapi.GXVECTOR3D`.</span>

<span class="sd">        .. versionadded: 9.3.1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">voxd_group</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">READ_ONLY</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">is_group</span><span class="p">(</span><span class="n">group_name</span><span class="p">,</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_IS_VOXD</span><span class="p">):</span>
            <span class="n">voxd_group</span><span class="o">.</span><span class="n">_voxd</span> <span class="o">=</span> <span class="n">gxvoxd</span><span class="o">.</span><span class="n">VoxDisplay</span><span class="o">.</span><span class="n">gxapi_gxvoxd</span><span class="p">(</span><span class="n">voxd_group</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">get_voxd</span><span class="p">(</span><span class="n">voxd_group</span><span class="o">.</span><span class="n">number</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">is_group</span><span class="p">(</span><span class="n">group_name</span><span class="p">,</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">MVIEW_IS_VECTOR3D</span><span class="p">):</span>
            <span class="n">voxd_group</span><span class="o">.</span><span class="n">_voxd</span> <span class="o">=</span> <span class="n">gxvoxd</span><span class="o">.</span><span class="n">VoxDisplay</span><span class="o">.</span><span class="n">gxapi_gxvoxd</span><span class="p">(</span><span class="n">voxd_group</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">gxview</span><span class="o">.</span><span class="n">get_vector_3d</span><span class="p">(</span><span class="n">voxd_group</span><span class="o">.</span><span class="n">number</span><span class="p">),</span>
                                                              <span class="n">name</span><span class="o">=</span><span class="n">group_name</span> <span class="o">+</span> <span class="s2">&quot;.geosoft_vectorvoxel&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="s1">&#39;Group &quot;</span><span class="si">{}</span><span class="s1">&quot; is not a GXVOXD or a GXVECTOR3D&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">group_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">voxd_group</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">voxd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The `geosoft.gxpy.vox_display.VoxDisplay` for this vox group.</span>

<span class="sd">        .. versionadded:: 9.3.1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_voxd</span></div>


<div class="viewcode-block" id="Color_map"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_map">[docs]</a><span class="k">class</span> <span class="nc">Color_map</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Color map for establishing data color mapping for things like aggregates and color symbols.</span>
<span class="sd">    </span>
<span class="sd">    :param cmap:    the name of a Geosoft color map file (`.tbl, .zon, .itr, .agg`) from which to</span>
<span class="sd">                    establish the initial colors.  If the file does not have zone values,</span>
<span class="sd">                    which is the case for a `.tbl` file, the Color_map will be uninitialized and you</span>
<span class="sd">                    can use one of the `set` methods to establish zone values.</span>
<span class="sd">                    </span>
<span class="sd">                    You can also provide an `int`, which will create an uninitialized map of the the</span>
<span class="sd">                    specified length, or a :class:`geosoft.gxapi.GXITR` instance.</span>
<span class="sd">                    </span>
<span class="sd">                    If not specified the Geosoft default color table is used.</span>

<span class="sd">    :param title:   Color map title which is displayed in the color map legend.</span>
<span class="sd">    :param unit_of_measure: Unit of measure to be displayed in a color map legend.</span>

<span class="sd">    .. versionadded:: 9.2</span>

<span class="sd">    .. versionchanged:: 9.3</span>
<span class="sd">        changed `units` to `unit_of_measure` for consistency across gxpy</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Color_map.__init__"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_map.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unit_of_measure</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">cmap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sr</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">str_ref</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXSYS</span><span class="o">.</span><span class="n">global_</span><span class="p">(</span><span class="s1">&#39;MONTAJ.DEFAULT_COLOUR&#39;</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">cmap</span> <span class="o">=</span> <span class="n">sr</span><span class="o">.</span><span class="n">value</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">cmap</span><span class="p">:</span>
                <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;colour&#39;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">cmap</span> <span class="o">==</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span>
                <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;colour&#39;</span>
            <span class="n">base</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ext</span><span class="p">:</span>
                <span class="n">cmap</span> <span class="o">=</span> <span class="n">cmap</span> <span class="o">+</span> <span class="s1">&#39;.tbl&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_name</span> <span class="o">=</span> <span class="n">cmap</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXITR</span><span class="o">.</span><span class="n">create_file</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXITR</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cmap</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">gxapi</span><span class="o">.</span><span class="n">rMAX</span><span class="p">,</span> <span class="n">C_BLACK</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_name</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">GXITR</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span> <span class="o">=</span> <span class="n">cmap</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Cannot make a color map from: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cmap</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_next</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_units</span> <span class="o">=</span> <span class="n">unit_of_measure</span></div>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_next</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_next</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_next</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">item</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span>
        <span class="n">ir</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">int_ref</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">get_zone_color</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">ir</span><span class="p">)</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">ir</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">get_zone_value</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">v</span><span class="p">,</span> <span class="n">color</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">setting</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">item</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">setting</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">setting</span> <span class="o">=</span> <span class="p">(</span><span class="n">setting</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">setting</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">int_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">set_zone_color</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">setting</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">set_zone_value</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">setting</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">length</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">other</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Title, usually the name of the data from which the color bar was made or is intended. </span>
<span class="sd">        None if no title</span>
<span class="sd">        </span>
<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_title</span>

    <span class="nd">@title</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">unit_of_measure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Data unit of measure for the data from which the color bar was made or is intended.</span>
<span class="sd">        None if the unit of measure is unknown.</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units</span>

    <span class="nd">@unit_of_measure</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">unit_of_measure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">units</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">units</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_units</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">units</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_units</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Data limits of color map</span>

<span class="sd">        The limit values are for information only.  Applications will</span>
<span class="sd">        assume that these values represent the largest and smallest</span>
<span class="sd">        values in a population represented by the ITR.  If they are</span>
<span class="sd">        dummy, they have not been set.</span>

<span class="sd">        :returns:       min/max tuple</span>

<span class="sd">        .. versionadded:: 9.4</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">min</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">float_ref</span><span class="p">()</span>
        <span class="nb">max</span> <span class="o">=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">float_ref</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">get_data_limits</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">min</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">max</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@data_limits</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">data_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limits</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">get_data_limits</span><span class="p">(</span><span class="n">limits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">limits</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Number of color zones in the map.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">brightness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Brightness is a value between -1 (black) and +1 (white),  The default is 0.</span>
<span class="sd">        :returns: brightness, -1 to +1</span>
<span class="sd">        </span>
<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">get_brightness</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">color_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;list of zone limts, colours in the color map&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">vc</span> <span class="k">for</span> <span class="n">vc</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">color_map_rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;list of zone limits and (red, green, blue) colours&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">vc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rgb</span><span class="p">)</span> <span class="k">for</span> <span class="n">vc</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>

    <span class="nd">@brightness</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">brightness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Map brightness between -1 (black ) and +1 (white.  Can be set.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">change_brightness</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">model_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Geosoft colour model used in the Geosoft :class:`geosoft.gxapi.GXITR`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">get_zone_model_type</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True if the color_map has been initialized to have zone boundaries.</span>
<span class="sd">        </span>
<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">gxapi</span><span class="o">.</span><span class="n">rMAX</span>

<div class="viewcode-block" id="Color_map.set_sequential"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_map.set_sequential">[docs]</a>    <span class="k">def</span> <span class="nf">set_sequential</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">increment</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set color map zones based on a start and increment between each color zone.</span>
<span class="sd">        </span>
<span class="sd">        :param start:       minimum zone boundary, values &lt;= this value will have the first color</span>
<span class="sd">        :param increment:   increment between each color.</span>
<span class="sd">        </span>
<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">increment</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s1">&#39;increment must be &gt; 0.&#39;</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">set_zone_value</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">increment</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color_map.set_linear"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_map.set_linear">[docs]</a>    <span class="k">def</span> <span class="nf">set_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minimum</span><span class="p">,</span> <span class="n">maximum</span><span class="p">,</span> <span class="n">inner_limits</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">contour_interval</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the map boundaries based on a linear distribution between minimum and maximum.</span>
<span class="sd">        </span>
<span class="sd">        :param minimum:             minimum </span>
<span class="sd">        :param maximum:             maximum</span>
<span class="sd">        :param inner_limits:        True if the range specifies the inner limits of the color mappings, in which</span>
<span class="sd">                                    case values less than or equal to the minimum are mapped to the first color</span>
<span class="sd">                                    and colors greater than the maximum are mapped to the last color.  If False,</span>
<span class="sd">                                    the minimum and maximum are at the outer-edges of the color map.</span>
<span class="sd">        :param contour_interval:    align color edges on this interval, which is useful for matching colors</span>
<span class="sd">                                    contour map, for example.  The color map will be reduced in size by thinning of </span>
<span class="sd">                                    unneeded colors if necessary.</span>
<span class="sd">                                    </span>
<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">inner_limits</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">GroupException</span><span class="p">(</span><span class="n">_t</span><span class="p">(</span><span class="s2">&quot;Colour map must have length &gt;= 3 for inner edge linear range.&quot;</span><span class="p">))</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">maximum</span> <span class="o">-</span> <span class="n">minimum</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">minimum</span> <span class="o">-=</span> <span class="n">delta</span>
            <span class="n">maximum</span> <span class="o">+=</span> <span class="n">delta</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">linear</span><span class="p">(</span><span class="n">minimum</span><span class="p">,</span> <span class="n">maximum</span><span class="p">,</span>
                          <span class="n">gxapi</span><span class="o">.</span><span class="n">rDUMMY</span> <span class="k">if</span> <span class="n">contour_interval</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">contour_interval</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color_map.set_logarithmic"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_map.set_logarithmic">[docs]</a>    <span class="k">def</span> <span class="nf">set_logarithmic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minimum</span><span class="p">,</span> <span class="n">maximum</span><span class="p">,</span> <span class="n">contour_interval</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the color boundaries based on a logarithmic distribution between minimum and maximum.</span>

<span class="sd">        :param minimum:             minimum, must be &gt; 0</span>
<span class="sd">        :param maximum:             maximum</span>
<span class="sd">        :param contour_interval:    align color edges on this interval, 10 for powers of 10.</span>
<span class="sd">                                    unneeded colors if necessary.</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">log_linear</span><span class="p">(</span><span class="n">minimum</span><span class="p">,</span> <span class="n">maximum</span><span class="p">,</span>
                              <span class="n">gxapi</span><span class="o">.</span><span class="n">rDUMMY</span> <span class="k">if</span> <span class="n">contour_interval</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">contour_interval</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color_map.set_normal"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_map.set_normal">[docs]</a>    <span class="k">def</span> <span class="nf">set_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">standard_deviation</span><span class="p">,</span> <span class="n">mean</span><span class="p">,</span> <span class="n">expansion</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">contour_interval</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the color boundaries using a normal distribution around a mean.</span>

<span class="sd">        :param standard_deviation:  the standard deviation of the normal distribution.</span>
<span class="sd">        :param mean:                maximum</span>
<span class="sd">        :param expansion:           expand by this factor around the mean</span>
<span class="sd">        :param contour_interval:    align color edges on this interval, 10 for powers of 10.</span>
<span class="sd">                                    unneeded colors if necessary.</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">standard_deviation</span><span class="p">,</span>
                          <span class="n">mean</span><span class="p">,</span>
                          <span class="n">expansion</span><span class="p">,</span>
                          <span class="n">gxapi</span><span class="o">.</span><span class="n">rDUMMY</span> <span class="k">if</span> <span class="n">contour_interval</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">contour_interval</span><span class="p">)</span></div>

<div class="viewcode-block" id="Color_map.color_of_value"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_map.color_of_value">[docs]</a>    <span class="k">def</span> <span class="nf">color_of_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the gxg.Color of a value.  The mapping is determined with exclusive minima, inclusive maxima</span>
<span class="sd">        for each color level.  Values &lt;= level [0] are assigned the [0] color, and values greater than the </span>
<span class="sd">        the [n-2] level are assigned the [n-1] color.</span>
<span class="sd">        </span>
<span class="sd">        :param value:   data value</span>
<span class="sd">        :returns:       :class:`Color` instance</span>
<span class="sd">        </span>
<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">color_value</span><span class="p">(</span><span class="n">value</span><span class="p">))</span></div>


<div class="viewcode-block" id="Color_map.save_file"><a class="viewcode-back" href="../../../geosoft.gxpy.group.html#geosoft.gxpy.group.Color_map.save_file">[docs]</a>    <span class="k">def</span> <span class="nf">save_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save to a Geosoft file, `.tbl`, `.itr` or `.zon`.  If the file_name does not have an</span>
<span class="sd">        extension and the color_map has not been initialized a `.tbl` file is created (colors only), </span>
<span class="sd">        otherwise a `.itr` is created, which contains both zone boundaries and colors.</span>

<span class="sd">        :param file_name:   file name, if None a temporary file is created</span>

<span class="sd">        This is useful for gxapi methods that require a colour map to be loaded from a file. Say you</span>
<span class="sd">        cave a Color_map instance named `cmap` and you want to create a GXCSYMB instance, which</span>
<span class="sd">        requires a colur map file:</span>

<span class="sd">        .. code::</span>

<span class="sd">            cs = gxapi.GXCSYMB.create(cmap.save_file())</span>

<span class="sd">        .. versionadded:: 9.2</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">file_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="n">gx</span><span class="o">.</span><span class="n">gx</span><span class="p">()</span><span class="o">.</span><span class="n">temp_file</span><span class="p">()</span>

        <span class="n">fn</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ext</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span><span class="p">:</span>
                <span class="n">file_name</span> <span class="o">=</span> <span class="n">fn</span> <span class="o">+</span> <span class="s1">&#39;.itr&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">file_name</span> <span class="o">=</span> <span class="n">fn</span> <span class="o">+</span> <span class="s1">&#39;.tbl&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gxitr</span><span class="o">.</span><span class="n">save_file</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">file_name</span></div></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Geosoft GX Python API 9.9.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">geosoft.gxpy.group</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Geosoft Inc.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

  </body>
</html>